(window.webpackJsonp=window.webpackJsonp||[]).push([[224,225],{1302:function(e,t,n){"use strict";n.r(t),n.d(t,"useDatasetViewModel",(function(){return s}));n(15);var a=n(69),o=n(304),i=n(94),r=n(132),s=function useDatasetViewModel(){var e=Object(a.d)(!1),t=Object(a.h)(),n=Object(r.a)(),s=Object(i.k)().t,c=t.value.params.id;return{datasetId:c,isLoadingDataset:e,handleError:function handleError(e){var t="";switch(e){case o.a.ERROR_FETCHING_DATASET_INFO:t="Can't get dataset info for dataset_id: ".concat(c);break;case o.a.ERROR_FETCHING_WORKSPACE_INFO:t="Can't get workspace info for dataset_id: ".concat(c);break;default:t="There was an error on fetching dataset info and workspace info. Please try again"}n.notify({message:t,type:"danger"})},createRootBreadCrumbs:function createRootBreadCrumbs(e){return[{link:{name:"index"},name:s("breadcrumbs.home")},{link:{path:"/?workspaces=".concat(e.workspace)},name:e.workspace},{link:{path:"annotation-mode"},name:e.name}]}}}},1630:function(e,t,n){"use strict";n.r(t),n.d(t,"useDatasetSettingViewModel",(function(){return f}));var a=n(53),o=(n(9),n(38),n(4),n(93)),i=n(8),r=n(1302),s=n(362),c=n(352),u=n(94),d=n(132),__awaiter=function(e,t,n,a){return new(n||(n=Promise))((function(o,i){function fulfilled(e){try{step(a.next(e))}catch(e){i(e)}}function rejected(e){try{step(a.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,t||[])).next())}))},f=function useDatasetSettingViewModel(){var e=Object(d.a)(),t=Object(u.j)(),n=Object(u.c)(),f=Object(u.k)().t,l=Object(u.i)().isAdminOrOwnerRole,g=Object(c.a)().state,m=Object(r.useDatasetViewModel)(),p=m.datasetId,b=m.isLoadingDataset,v=m.handleError,h=m.createRootBreadCrumbs,O=Object(i.useResolve)(s.a),w=Object(o.f)([]),k=function configureTabs(e){w.value.push({id:"general",name:f("general"),component:"SettingsInfo"}),w.value.push({id:"fields",name:f("fields"),component:"SettingsFields"}),w.value.push({id:"questions",name:f("questions"),component:"SettingsQuestions"}),e.hasMetadataProperties&&w.value.push({id:"metadata",name:f("metadata"),component:"SettingsMetadata"}),e.hasVectors&&w.value.push({id:"vector",name:f("vectors"),component:"SettingsVectors"}),w.value.push({id:"danger-zone",name:f("dangerZone"),component:"SettingsDangerZone"})},j=Object(o.a)((function(){return[].concat(Object(a.a)(h(g.dataset)),[{link:{},name:f("breadcrumbs.datasetSettings")}])})),T=function goToTab(e){var t;null===(t=document.getElementById(e))||void 0===t||t.click()};Object(o.b)((function(){!function loadDatasetSetting(){__awaiter(void 0,void 0,void 0,regeneratorRuntime.mark((function _callee(){var e;return regeneratorRuntime.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,b.value=!0,n.next=4,O.execute(p);case 4:e=n.sent,k(e),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),v(n.t0.response),t.go("/");case 12:return n.prev=12,b.value=!1,n.finish(12);case 15:case"end":return n.stop()}}),_callee,null,[[0,8,12,15]])})))}()})),Object(o.c)((function(){n.destroy()})),Object(o.g)((function(){return g.isModified}),(function(e){if(e)return n.confirm();n.destroy()}));return{isLoadingDataset:b,breadcrumbs:j,tabs:w,isAdminOrOwnerRole:l,datasetId:p,datasetSetting:g,goToOutside:function goToOutside(t){if(g.isModified)return e.notify({message:f("changes_no_submit"),buttonText:f("button.ignore_and_continue"),permanent:!0,type:"warning",onClick:function onClick(){t()},onClose:function onClose(){!function goToTabWithModification(){g.isDatasetModified?T("general"):g.isFieldsModified?T("fields"):g.isQuestionsModified?T("questions"):g.isMetadataPropertiesModified?T("metadata"):g.isVectorsModified&&T("vector")}()}});t()},goToDataset:function goToDataset(){if(t.previousRouteMatchWith("".concat(p,"/annotation-mode")))return t.goBack();t.goToFeedbackTaskAnnotationPage(p)},onTabChanged:function onTabChanged(e){return __awaiter(void 0,void 0,void 0,regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setQueryParamsVirtually({key:"tab",value:e});case 2:case"end":return n.stop()}}),_callee2)})))},onTabLoaded:function onTabLoaded(){var e=t.getQueryParams("tab");w.value.some((function(t){return t.id===e}))&&T(e)}}}}}]);
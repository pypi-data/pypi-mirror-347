.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "SNAPMOD.PY" "1" "May 12, 2025" "9.6" "SkoolKit"
.SH NAME
snapmod.py \- modify an SZX or Z80 snapshot
.SH SYNOPSIS
.sp
\fBsnapmod.py\fP [options] infile [outfile]
.SH DESCRIPTION
.sp
\fBsnapmod.py\fP modifies the registers and RAM in an SZX or Z80 snapshot.
.SH OPTIONS
.INDENT 0.0
.TP
.B \-m, \-\-move \fI[s:]src,size,[d:]dest\fP
Copy a block of bytes of the given size from \(aqsrc\(aq in RAM bank \(aqs\(aq to \(aqdest\(aq
in RAM bank \(aqd\(aq. This option may be used multiple times. \(aqsrc\(aq, \(aqsize\(aq and
\(aqdest\(aq must each be a decimal number, or a hexadecimal number prefixed by
\(aq0x\(aq.
.TP
.B \-\-patch \fI[p:]a,file\fP
Apply a binary patch file at address \(aqa\(aq in RAM bank \(aqp\(aq. This option may be
used multiple times. \(aqa\(aq must be a decimal number, or a hexadecimal number
prefixed by \(aq0x\(aq.
.TP
.B \-p, \-\-poke \fI[p:]a[\-b[\-c]],[^+]v\fP
POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}. Prefix \(aqv\(aq with \(aq^\(aq to
perform an XOR operation, or \(aq+\(aq to perform an ADD operation. This option may
be used multiple times. \(aqa\(aq, \(aqb\(aq, \(aqc\(aq and \(aqv\(aq must each be a decimal number,
or a hexadecimal number prefixed by \(aq0x\(aq.
.TP
.B \-r, \-\-reg \fIname=value\fP
Set the value of a register. Do \fB\-\-reg help\fP for more information, or see
the section on \fBREGISTERS\fP below. This option may be used multiple times.
.TP
.B \-s, \-\-state \fIname=value\fP
Set a hardware state attribute. Do \fB\-\-state help\fP for more information, or
see the section on \fBHARDWARE STATE\fP below. This option may be used multiple
times.
.UNINDENT
.INDENT 0.0
.TP
.B  \-V\fP,\fB  \-\-version
Show the SkoolKit version number and exit.
.UNINDENT
.SH REGISTERS
.sp
The \fB\-\-reg\fP option sets the value of a register in the snapshot.
.nf

.in +2
\fB\-\-reg name=value\fP
.in -2
.fi
.sp
.sp
For example:
.nf

.in +2
\fB\-\-reg hl=32768\fP
\fB\-\-reg b=0x1f\fP
.in -2
.fi
.sp
.sp
To set the value of an alternate (shadow) register, use the \(aq^\(aq prefix:
.nf

.in +2
\fB\-\-reg ^hl=10072\fP
.in -2
.fi
.sp
.sp
Recognised register names are:
.nf

.in +2
\fB^a\fP, \fB^b\fP, \fB^bc\fP, \fB^c\fP, \fB^d\fP, \fB^de\fP, \fB^e\fP, \fB^f\fP, \fB^h\fP, \fB^hl\fP, \fB^l\fP,
\fBa\fP, \fBb\fP, \fBbc\fP, \fBc\fP, \fBd\fP, \fBde\fP, \fBe\fP, \fBf\fP, \fBh\fP, \fBhl\fP, \fBl\fP,
\fBi\fP, \fBix\fP, \fBiy\fP, \fBpc\fP, \fBr\fP, \fBsp\fP
.in -2
.fi
.sp
.SH HARDWARE STATE
.sp
The \fB\-\-state\fP option sets a hardware state attribute.
.nf

.in +2
\fB\-\-state name=value\fP
.in -2
.fi
.sp
.sp
Recognised attribute names are:
.nf

.in +2
\fB7ffd\fP    \- last OUT to port 0x7ffd (128K only)
\fBay[N]\fP   \- contents of AY register N (N=0\-15; 128K only)
\fBborder\fP  \- border colour
\fBfe\fP      \- last OUT to port 0xfe (SZX only)
\fBfffd\fP    \- last OUT to port 0xfffd (128K only)
\fBiff\fP     \- interrupt flip\-flop: 0=disabled, 1=enabled
\fBim\fP      \- interrupt mode
\fBissue2\fP  \- issue 2 emulation: 0=disabled, 1=enabled
\fBtstates\fP \- T\-states elapsed since start of frame
.in -2
.fi
.sp
.SH EXAMPLES
.INDENT 0.0
.IP 1. 3
Set the value of the HL register pair to 0 in \fBgame.z80\fP:
.nf

.in +2
\fBsnapmod.py \-r hl=0 game.z80\fP
.in -2
.fi
.sp
.IP 2. 3
POKE the value 23 into address 32768 in \fBgame.szx\fP, and write the
resultant snapshot to \fBpoked.szx\fP:
.nf

.in +2
\fBsnapmod.py \-p 32768,23 game.szx poked.szx\fP
.in -2
.fi
.sp
.UNINDENT
.SH AUTHOR
Richard Dymond
.SH COPYRIGHT
2025, Richard Dymond
.\" Generated by docutils manpage writer.
.

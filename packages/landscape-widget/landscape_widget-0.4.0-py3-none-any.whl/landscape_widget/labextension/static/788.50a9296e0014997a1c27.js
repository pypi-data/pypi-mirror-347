"use strict";(self.webpackChunklandscape_widget=self.webpackChunklandscape_widget||[]).push([[788],{788:(e,t,n)=>{n.r(t),n.d(t,{LandscapeModel:()=>S,LandscapeView:()=>R});var i=n(983),s=n(797);const o={0:{nodes:[{points:[0],size:4},{points:[1],size:4},{points:[2],size:4},{points:[3],size:4}],edges:[{s:0,t:1,w:1},{s:1,t:2,w:.75},{s:2,t:3,w:.5},{s:0,t:3,w:.25}]},1:{nodes:[{points:[0,1],size:4},{points:[2,3],size:4}],edges:[{s:0,t:1,w:1}]},2:{nodes:[{points:[0,1,2,3],size:4}],edges:[]}};var r=n(318),a=n.n(r),l=n(879),d=n.n(l),c=n(237),p=n.n(c),u=n(862),h=n.n(u),g=n(50),b=n.n(g),m=n(495),v=n.n(m),f=n(780),w={};w.styleTagTransform=v(),w.setAttributes=h(),w.insert=p().bind(null,"head"),w.domAPI=d(),w.insertStyleElement=b(),a()(f.A,w),f.A&&f.A.locals&&f.A.locals;var y=n(916),x=n(363),_={};_.styleTagTransform=v(),_.setAttributes=h(),_.insert=p().bind(null,"head"),_.domAPI=d(),_.insertStyleElement=b(),a()(x.A,_),x.A&&x.A.locals&&x.A.locals;var C=n(238),k=n.n(C),j=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const L={allowInvalidContainer:!0,zoomToSizeRatioFunction:e=>e>1.5?Math.sqrt(1.5*e):e},G={adjustSizes:!0};class S extends i.DOMWidgetModel{initialize(e,t){super.initialize(e,t),this.on("change:colors",this.updateNodeColors,this),this.on("change:node_labels",this.updateNodeLabels,this),this.on("change:node_hover_labels",this.updateNodeHoverLabels,this),this.on("change:node_attrs",this.updateNodeAttrs,this),this.on("change:rich_node_hover_template",this.updateHoverTemplate,this),this.on("change:selected_level",this.updateSelectedLevel,this),this.on("change:avg_degree",this.updateAvgDegree,this),this.on("change:selected_points",this.updateSelectedPoints,this),this.on("msg:custom",this.handleCustomMessage,this),this.loadGraph()}loadGraph(){return j(this,void 0,void 0,(function*(){const e=this.get("graph"),t=this.get("node_labels"),n=this.get("node_hover_labels"),i=Object.keys(e).map(Number),s=Math.min(...i),o=Math.max(...i),r=this.get("selected_level")||Math.floor((s+o)/2),a={coarseness:{label:"Coarseness",minValue:s,maxValue:o,initialValue:r,step:1},connectivity:{label:"Connectivity",minValue:0,maxValue:20,initialValue:this.get("avg_degree")||6,step:.1},selectedLevel:r.toString()},l=this.get("layout").attributes||{},d={};if(l.width&&l.height){const e=String(l.width),t=String(l.height);if(e.endsWith("px")&&t.endsWith("px")){const n=Number(e.slice(0,e.length-2)),i=Number(t.slice(0,t.length-2));d.expectedDims=[n,i]}}this.multiResolutionGraph=new y.MultiResolutionGraph({graphData:e,sliderConfig:a,sigmaSettings:Object.assign(Object.assign({},L),this.get("sigma_settings")||{}),onSelectedNodesChange:()=>{},onSelectedPointsChange:this.setSelectedPoints.bind(this),onFullScreenChange:this.toggleExpandedLayout.bind(this),onCoarsenessChange:this.setCoarsenessLevel.bind(this),onConnectivityChange:this.setConnectivityLevel.bind(this),nodeLabels:t,nodeHoverLabels:n,layoutConfig:Object.assign(Object.assign({adjustSizes:!0},d),this.get("layout_config"))}),this.updateNodeProperties(),this.updateHoverTemplate()}))}updateNodeProperties(){this.updateNodeColors(),this.updateNodeLabels(),this.updateNodeHoverLabels(),this.updateNodeAttrs()}setSelectedPoints(e){this.set("selected_points",e),this.save_changes()}toggleExpandedLayout(e){this.set("is_expanded_layout",e),this.save_changes()}setCoarsenessLevel(e){this.set("selected_level",e),this.save_changes()}setConnectivityLevel(e){this.set("avg_degree",e),this.save_changes()}updateNodeColors(){if(!this.multiResolutionGraph)return;const e=this.get("colors");e&&this.multiResolutionGraph.setNodeColors(e)}updateNodeLabels(){if(!this.multiResolutionGraph)return;const e=this.get("node_labels");e&&this.multiResolutionGraph.setNodeLabels(e)}updateNodeHoverLabels(){if(!this.multiResolutionGraph)return;const e=this.get("node_hover_labels");e&&this.multiResolutionGraph.setNodeHoverLabels(e)}updateNodeAttrs(){if(!this.multiResolutionGraph)return;const e=this.get("node_attrs");e&&this.multiResolutionGraph.setNodeAttrs(e)}updateHoverTemplate(){if(!this.multiResolutionGraph)return;const e=this.get("rich_node_hover_template");e&&this.multiResolutionGraph.setNodeHoverTemplate(e)}updateSelectedLevel(){return j(this,void 0,void 0,(function*(){if(!this.multiResolutionGraph)return;const e=this.get("selected_level");e&&String(e)!==String(this.multiResolutionGraph.selectedLevel)&&(yield this.multiResolutionGraph.setCoarsenessLevel(e),this.multiResolutionGraph.sliderManager.setSliderValue("Coarseness",e))}))}updateAvgDegree(){if(!this.multiResolutionGraph)return;const e=this.get("avg_degree");(e||0===e)&&(this.multiResolutionGraph.setConnectivityLevel(e),this.multiResolutionGraph.sliderManager.setSliderValue("Connectivity",e))}updateSelectedPoints(){if(!this.multiResolutionGraph)return;const e=this.get("selected_points");e&&this.multiResolutionGraph.setSelectedPoints(e)}disposeGraph(){this.multiResolutionGraph.cleanup(),this.multiResolutionGraph.dispose()}resetView(){this.multiResolutionGraph.resetView()}handleCustomMessage(e){"dispose_graph"===e.event_type?this.disposeGraph():"reset_view"===e.event_type&&this.resetView()}defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:S.model_name,_model_module:S.model_module,_model_module_version:S.model_module_version,_view_name:S.view_name,_view_module:S.view_module,_view_module_version:S.view_module_version,graph:o,colors:null,node_labels:null,node_hover_labels:null,node_sizes:null,selected_nodes:[],sigma_settings:L,background_color:null,is_expanded_layout:!1,layout_settings:G})}}S.serializers=Object.assign({},i.DOMWidgetModel.serializers),S.model_name="LandscapeModel",S.model_module=s.p,S.model_module_version=s.e,S.view_name="LandscapeView",S.view_module=s.p,S.view_module_version=s.e;class R extends i.DOMWidgetView{constructor(e){super(e),this.view=null;const t=new(k());this.containerId=`landscape-container-${t.next().toString(36).substring(2)}`}render(){this.createLandscapeContainer(),this.setupGraphManager(),this.model.on("change:background_color",this.setBackgroundColor,this)}createLandscapeContainer(){this._landscapeContainer=document.createElement("div"),this._landscapeContainer.id=this.containerId,this._landscapeContainer.style.position="relative",this._landscapeContainer.classList.add("landscape-container"),this.setBackgroundColor(),this.el.appendChild(this._landscapeContainer),this.el.classList.add("custom-widget")}setupGraphManager(){return j(this,void 0,void 0,(function*(){const e=document.getElementById(this.containerId);e&&this.model.multiResolutionGraph?(this.view=yield this.model.multiResolutionGraph.getView(e),yield this.view.graphManager.resetView()):setTimeout((()=>this.setupGraphManager()),100)}))}setBackgroundColor(){const e=this.model.get("background_color");e&&(this.el.style.backgroundColor=e,this._landscapeContainer.style.backgroundColor=e,this._landscapeContainer.style.setProperty("--sigma-background-color",e))}remove(){return this.view&&(this.view.graphManager.cleanup(),this.view.graphManager.dispose(),this.model.multiResolutionGraph&&(this.model.multiResolutionGraph.deleteView(this.view),this.model.multiResolutionGraph.sliderManager.deleteView(this.view.sliderView))),super.remove()}}},797:(e,t,n)=>{n.d(t,{e:()=>s,p:()=>o});const i=n(330),s=i.version,o=i.name},780:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(551),s=n.n(i),o=n(992),r=n.n(o)()(s());r.push([e.id,".custom-widget {\n  padding: 5px;\n}\n\n.landscape-container {\n    height: 100%;\n    width: 100%;\n}\n",""]);const a=r},363:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(551),s=n.n(i),o=n(992),r=n.n(o)()(s());r.push([e.id,".graph-container .controls-container>button{display:flex;justify-content:center;align-items:center;border-radius:4px;border:none;margin:0 4px 0 0;padding:0;background-color:#e2e4e7}.graph-container .controls-container>button:hover{background-color:#cbcdd0}.graph-container .controls-container>button.active{background-color:#bddde8}.graph-container .controls-container>button[data-tooltip]:before{position:absolute;display:none;pointer-events:none;transition:opacity .3s;content:attr(data-tooltip);background-color:#33455f;color:#fff;font-size:1rem;line-height:1.4;border-radius:4px;padding:4px 8px;max-width:300px;margin-bottom:14px;white-space:nowrap;font-weight:500;bottom:100%}.graph-container .controls-container>button[data-tooltip]:hover:before{display:block}.graph-container .controls-container>button[data-tooltip]:last-of-type:before{left:100%;transform:translateX(-100%)}.graph-container .webgl-overlay{font-size:20px;text-align:center;opacity:.9}.graph-container .webgl-overlay>button{font-size:16px;background-color:#007bff;color:#fff;border:none;border-radius:4px}.slider-container{position:absolute;top:0;width:490px;display:flex;border:1px solid #d3d3d3;border-radius:4px;height:40px;box-sizing:border-box}.slider-container .slider-wrapper{display:flex;align-items:center;padding:0 5px}.slider-container .slider-wrapper .slider-label{margin:0;font-size:14px}.slider-container .slider-wrapper .slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:110px;height:4px;margin-right:10px;margin-left:5px;border-radius:4px;background:#2196f3;outline:none;cursor:pointer}.slider-container .slider-wrapper .slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;background:#2196f3;border-radius:50%}.slider-container .slider-wrapper .slider::-moz-range-thumb{width:16px;height:16px;background:#2196f3;border-radius:50%;border:none}.slider-container .slider-wrapper .slider:hover::-webkit-slider-thumb{background:#1976d2}.slider-container .slider-wrapper .slider:hover::-moz-range-thumb{background:#1976d2}.slider-container .slider-wrapper .slider:hover::-ms-thumb{background:#1976d2}.slider-container .slider-wrapper .slider:active::-webkit-slider-thumb{background:#0d47a1}.slider-container .slider-wrapper .slider:active::-moz-range-thumb{background:#0d47a1}.slider-container .slider-wrapper .slider:active::-ms-thumb{background:#0d47a1}.slider-container .slider-wrapper .slider-value{min-width:20px;text-align:center}\n",""]);const a=r},992:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);i&&r[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),t.push(c))}},t}},551:e=>{e.exports=function(e){return e[1]}},318:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},r=[],a=0;a<e.length;a++){var l=e[a],d=i.base?l[0]+i.base:l[0],c=o[d]||0,p="".concat(d," ").concat(c);o[d]=c+1;var u=n(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var g=s(h,i);i.byIndex=a,t.splice(a,0,{identifier:p,updater:g,references:1})}r.push(p)}return r}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var o=i(e=e||[],s=s||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var a=n(o[r]);t[a].references--}for(var l=i(e,s),d=0;d<o.length;d++){var c=n(o[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},237:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},50:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},862:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},879:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},495:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},330:e=>{e.exports=JSON.parse('{"name":"landscape-widget","version":"0.4.0","description":"Jupyter widget for interactive graph visualization","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"author":{"name":"BlueLightAI","email":"support@bluelightai.com"},"license":"SEE LICENSE IN LICENSE.txt","main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/BlueLightAI/jupyter-landscapes"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","build:license-report-json":"license-report --output=json --config=.license-reportrc  > ./license-report.json","build:license-report-html":"license-report --output=html --config=.license-reportrc  > ./license-report.html","build-all":"node build.js","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf landscape_widget/labextension","clean:nbextension":"rimraf landscape_widget/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","blai-graph-widget":"link:./blai-graph-widget","lodash":"^4.17.21","rand-seed":"^1.0.2","ws":"^7.5.10 || ^8.17.1 || >=9"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.3","@jupyterlab/builder":"^4.3.3","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^29.0.0","license-report":"^6.5.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","sass":"^1.58.0","sass-loader":"^13.2.0","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^29.0.0","ts-loader":"^8.0.0","typescript":"^5.7.2","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"resolutions":{"blai-graph-widget":"file:./blai-graph-widget"},"jupyterlab":{"extension":"lib/plugin","outputDir":"landscape_widget/labextension/","webpackConfig":"./lab.webpack.config.js","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);
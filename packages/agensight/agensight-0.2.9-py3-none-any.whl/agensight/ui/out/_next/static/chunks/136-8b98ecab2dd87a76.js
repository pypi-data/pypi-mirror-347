"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{285:(e,t,a)=>{a.d(t,{$:()=>l});var r=a(5155);a(2115);var s=a(9708),n=a(2085),o=a(9434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all cursor-pointer disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:n,asChild:l=!1,...d}=e,c=l?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:a,size:n,className:t})),...d})}},954:(e,t,a)=>{a.d(t,{sF:()=>c,GB:()=>d});var r=a(5155),s=a(2115),n=a(2085),o=a(9434);a(285),a(2523);a(8856);var i=a(6102);let l=s.createContext(null);function d(e){let{defaultOpen:t=!0,open:a,onOpenChange:n,className:d,style:c,children:u,...m}=e,x=function(){let[e,t]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}(),[g,p]=s.useState(!1),[f,h]=s.useState(t),b=null!=a?a:f,v=s.useCallback(e=>{let t="function"==typeof e?e(b):e;n?n(t):h(t),document.cookie="".concat("sidebar_state","=").concat(t,"; path=/; max-age=").concat(604800)},[n,b]),w=s.useCallback(()=>x?p(e=>!e):v(e=>!e),[x,v,p]);s.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),w())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w]);let y=b?"expanded":"collapsed",j=s.useMemo(()=>({state:y,open:b,setOpen:v,isMobile:x,openMobile:g,setOpenMobile:p,toggleSidebar:w}),[y,b,v,x,g,p,w]);return(0,r.jsx)(l.Provider,{value:j,children:(0,r.jsx)(i.Bc,{delayDuration:0,children:(0,r.jsx)("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...c},className:(0,o.cn)("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",d),...m,children:u})})})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("main",{"data-slot":"sidebar-inset",className:(0,o.cn)("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t),...a})}(0,n.F)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}})},1180:(e,t,a)=>{a.d(t,{M:()=>j});var r=a(5155),s=a(2115),n=a(285),o=a(2523),i=a(5057),l=a(4165),d=a(9409),c=a(5028),u=a(5710),m=a(7313),x=a(6068),g=a(8628),p=a(9939),f=a(5548),h=a(6126),b=a(4684),v=a(8262);let w=(0,c.default)(()=>Promise.all([a.e(827),a.e(918)]).then(a.bind(a,5918)).then(e=>e.default),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),y=[{value:"gpt-4o-mini",label:"GPT-4o Mini"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo"},{value:"gpt-4o",label:"GPT-4o"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"}];function j(e){let{agent:t,setSelectedAgent:a,configVersion:c,onSave:j}=e,[N,k]=(0,s.useState)(""),[S,_]=(0,s.useState)(!1),[E,T]=(0,s.useState)(""),[z,C]=(0,s.useState)(0),[A,M]=(0,s.useState)(0),[P,F]=(0,s.useState)(0),[I,D]=(0,s.useState)("prompt"),[O,R]=(0,s.useState)(!1),[L,V]=(0,s.useState)({}),G=(0,s.useMemo)(()=>t&&"object"==typeof t&&t.name,[t]),J=(0,s.useMemo)(()=>G&&t.prompt||"",[t,G]);(0,s.useEffect)(()=>{k(J)},[J]),(0,s.useEffect)(()=>{_(G)},[G]),(0,s.useEffect)(()=>{G&&k(t.prompt||"")},[t,G]),(0,s.useEffect)(()=>{G&&t&&_(!0)},[t,G]);let K=(0,s.useMemo)(()=>{var e,a,r,s;return{model:(null==t||null==(e=t.modelParams)?void 0:e.model)||y[0].value,temperature:(null==t||null==(a=t.modelParams)?void 0:a.temperature)||0,topP:(null==t||null==(r=t.modelParams)?void 0:r.top_p)||1,maxTokens:(null==t||null==(s=t.modelParams)?void 0:s.max_tokens)||2e3}},[t]);(0,s.useEffect)(()=>{T(K.model),C(K.temperature),M(K.topP),F(K.maxTokens)},[K]);let U=(0,s.useMemo)(()=>G&&t.variables||[],[t,G]),W=(0,s.useCallback)(e=>{_(e),e||a(null)},[a]),$=(0,s.useCallback)(()=>{_(!1),a(null)},[a]),X=(0,s.useCallback)(async()=>{if(!G)return;R(!0),V({});let e={...t,prompt:N,variables:U,modelParams:{model:E,temperature:z,top_p:A,max_tokens:P}};try{if(j)await j(e),$();else{if(!c)return void console.error("No version specified for updating agent");console.log("Updating agent with data:",{agent:e,config_version:c});let a=await (0,b.x4)({agent:e,config_version:c});a.success?((0,v.oR)({title:"Success",description:"Agent ".concat(t.name," updated successfully in ").concat(a.version||"current version"),duration:3e3}),$()):(0,v.oR)({title:"Error",description:a.message||"Failed to update agent",variant:"destructive",duration:3e3})}}catch(e){console.error("Error saving agent:",e),(0,v.oR)({title:"Error",description:e instanceof Error?e.message:"Failed to update agent",variant:"destructive",duration:3e3})}finally{R(!1)}},[G,t,N,U,E,z,A,P,j,c,$]);return G?(0,r.jsx)(l.lG,{open:S,onOpenChange:W,children:(0,r.jsxs)(l.Cf,{className:"max-w-4xl p-0 gap-0 overflow-hidden bg-background border-0 !border-none sm:rounded-xl",children:[(0,r.jsx)(l.c7,{className:"px-6 py-4 border-b border-border/50",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"pr-8",children:[(0,r.jsxs)(l.L3,{className:"text-xl font-semibold flex items-center gap-2",children:[t.name,c&&(0,r.jsxs)(h.E,{variant:"outline",className:"text-xs",children:["Config v",c]})]}),(0,r.jsx)(l.rr,{className:"mt-1 text-sm text-slate-500",children:"Define this agent's behavior through prompts and model parameters"})]})})}),(0,r.jsx)("div",{className:"w-full h-[70vh] flex flex-col",children:(0,r.jsxs)(m.tU,{defaultValue:"prompt",value:I,onValueChange:D,className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"border-b border-border/50 bg-card/40 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"px-6",children:(0,r.jsxs)(m.j7,{className:"p-1 h-10 bg-transparent space-x-6 border-0",children:[(0,r.jsxs)(m.Xi,{value:"prompt",className:"text-sm font-medium px-3 py-3 rounded-md border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none data-[state=active]:text-primary data-[state=active]:bg-muted/40 transition-all duration-200 cursor-pointer hover:text-primary/80 hover:bg-muted/20",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Prompt"]}),(0,r.jsxs)(m.Xi,{value:"variables",className:"text-sm font-medium px-3 py-3 rounded-md border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none data-[state=active]:text-primary data-[state=active]:bg-muted/40 transition-all duration-200 cursor-pointer hover:text-primary/80 hover:bg-muted/20",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Variables"]}),(0,r.jsxs)(m.Xi,{value:"settings",className:"text-sm font-medium px-3 py-3 rounded-md border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none data-[state=active]:text-primary data-[state=active]:bg-muted/40 transition-all duration-200 cursor-pointer hover:text-primary/80 hover:bg-muted/20",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Settings"]})]})})}),(0,r.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,r.jsx)(m.av,{value:"prompt",className:"h-full flex-1 m-0 p-0 data-[state=active]:flex flex-col",children:(0,r.jsx)("div",{className:"flex-grow overflow-y-auto p-6",children:(0,r.jsx)("div",{"data-color-mode":"light",className:"w-full h-full",children:(0,r.jsx)(w,{value:N,onChange:e=>k(e||""),height:"calc(100% - 24px)",preview:"edit",previewOptions:{rehypePlugins:[[u.A]]}})})})}),(0,r.jsx)(m.av,{value:"variables",className:"h-full flex-1 m-0 data-[state=active]:flex flex-col",children:(0,r.jsxs)("div",{className:"flex-grow overflow-y-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-base font-semibold mb-2",children:"Available Variables"}),(0,r.jsxs)("p",{className:"text-sm text-slate-500 mb-4",children:["These variables can be used in your prompt with ","{variable_name}"," syntax"]})]}),U.length>0?(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:U.map(e=>(0,r.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-3 rounded border flex items-center shadow-sm",children:[(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-md p-1 mr-2",children:(0,r.jsx)(g.A,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e}),(0,r.jsx)("code",{className:"text-xs text-pink-600 dark:text-pink-400",children:"{".concat(e,"}")})]})]},e))}):(0,r.jsxs)("div",{className:"p-8 text-center bg-card rounded-lg border-0",children:[(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"No variables found in this prompt"}),(0,r.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Add variables by using ","{variable_name}"," syntax in your prompt"]})]})]})}),(0,r.jsx)(m.av,{value:"settings",className:"h-full flex-1 m-0 data-[state=active]:flex flex-col",children:(0,r.jsxs)("div",{className:"flex-grow overflow-y-auto p-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("h3",{className:"text-base font-semibold mb-3",children:"Model Configuration"})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.J,{htmlFor:"model",className:"mb-2 text-sm font-medium block",children:"Model"}),(0,r.jsxs)(d.l6,{value:E,onValueChange:T,children:[(0,r.jsx)(d.bq,{id:"model",className:"w-full",children:(0,r.jsx)(d.yv,{placeholder:"Select a model"})}),(0,r.jsx)(d.gC,{children:y.map(e=>(0,r.jsx)(d.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.J,{htmlFor:"max_tokens",className:"mb-2 text-sm font-medium block",children:"Max Tokens"}),(0,r.jsx)(o.p,{id:"max_tokens",type:"number",min:1,value:P,onChange:e=>F(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.J,{htmlFor:"temperature",className:"mb-2 text-sm font-medium block",children:"Temperature"}),(0,r.jsx)(o.p,{id:"temperature",type:"number",step:"0.01",min:0,max:2,value:z,onChange:e=>C(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.J,{htmlFor:"top_p",className:"mb-2 text-sm font-medium block",children:"Top P"}),(0,r.jsx)(o.p,{id:"top_p",type:"number",step:"0.01",min:0,max:1,value:A,onChange:e=>M(Number(e.target.value))})]})]})]})})]})]})}),(0,r.jsxs)(l.Es,{className:"px-6 py-4 border-t border-border/50",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 text-slate-500"}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:c&&"current"!==c?"Editing version ".concat(c):"Editing current version"})]})}),(0,r.jsx)(n.$,{variant:"outline",onClick:$,children:"Cancel"}),(0,r.jsx)(n.$,{onClick:X,className:"ml-2",children:"Save Changes"})]})]})}):null}},2076:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(5155),s=a(2115),n=a(4211),o=a(7916),i=a(3306),l=a(7581);function d(e){let{agents:t=[],connections:a=[],onNodeClick:d}=e,c=(0,n.VH)(),[u,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=()=>{let e=document.documentElement.classList.contains("dark");console.log("Dark mode detected:",e),m(e)};e();let t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);let x=u?["rgba(37, 99, 235, 0.5)","rgba(16, 185, 129, 0.5)","rgba(139, 92, 246, 0.5)","rgba(236, 72, 153, 0.5)","rgba(245, 158, 11, 0.5)"]:["#2563eb","#10b981","#8b5cf6","#ec4899","#f59e0b"],g=u?"rgba(34, 197, 94, 0.5)":"#22c55e",p=u?"rgba(239, 68, 68, 0.5)":"#ef4444",f=u?"rgba(16, 185, 129, 0.6)":"#10b981",h=u?"rgba(34, 197, 94, 0.6)":"#22c55e",b=u?"rgba(239, 68, 68, 0.6)":"#ef4444",v=(0,s.useRef)(!1),w=(0,s.useCallback)(()=>{let e=new Set(a.map(e=>e.from)),t=new Set(a.map(e=>e.to)),r=a.some(e=>"Start"===e.from),s=a.some(e=>"End"===e.to),n=[];e.forEach(e=>{"Start"!==e&&(t.has(e)||"End"===e)||n.push(e)});let o=[];return t.forEach(t=>{"End"!==t&&(e.has(t)||"Start"===t)||o.push(t)}),{startNodes:n,endNodes:o,hasExplicitStartNode:r,hasExplicitEndNode:s}},[a]),y=(0,s.useCallback)(()=>{let{startNodes:e,endNodes:a,hasExplicitStartNode:r,hasExplicitEndNode:s}=w(),n=t.filter(e=>"Start"!==e.name&&"End"!==e.name).map((e,t)=>({id:e.name,data:{label:e.name},position:{x:150+t%3*250,y:100+150*Math.floor(t/3)},style:{background:x[t%x.length],color:"#fff",padding:"10px 15px",borderRadius:"8px",width:180,textAlign:"center",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",backdropFilter:u?"blur(8px)":"none",border:u?"1px solid rgba(255, 255, 255, 0.1)":"none"}})),o=[...n];return r?o.unshift({id:"Start",data:{label:"START"},position:{x:150,y:0},style:{background:g,color:"#fff",padding:"10px 15px",borderRadius:"8px",width:120,textAlign:"center",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",backdropFilter:u?"blur(8px)":"none",border:u?"1px solid rgba(255, 255, 255, 0.1)":"none"}}):e.length>0&&o.unshift({id:"__start__",data:{label:"START"},position:{x:150,y:0},style:{background:g,color:"#fff",padding:"10px 15px",borderRadius:"8px",width:120,textAlign:"center",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",backdropFilter:u?"blur(8px)":"none",border:u?"1px solid rgba(255, 255, 255, 0.1)":"none"}}),s?o.push({id:"End",data:{label:"END"},position:{x:150,y:100+150*Math.ceil(n.length/3)},style:{background:p,color:"#fff",padding:"10px 15px",borderRadius:"8px",width:120,textAlign:"center",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",backdropFilter:u?"blur(8px)":"none",border:u?"1px solid rgba(255, 255, 255, 0.1)":"none"}}):a.length>0&&o.push({id:"__end__",data:{label:"END"},position:{x:150,y:100+150*Math.ceil(n.length/3)},style:{background:p,color:"#fff",padding:"10px 15px",borderRadius:"8px",width:120,textAlign:"center",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",backdropFilter:u?"blur(8px)":"none",border:u?"1px solid rgba(255, 255, 255, 0.1)":"none"}}),o},[t,x,w,u,g,p]),j=(0,s.useCallback)(()=>{let{startNodes:e,endNodes:t,hasExplicitStartNode:r,hasExplicitEndNode:s}=w(),o=[...a.map((e,t)=>({id:"e".concat(t),source:e.from,target:e.to,type:"default",animated:!0,style:{stroke:"Start"===e.from?h:"End"===e.to?b:f,strokeWidth:2},markerEnd:{type:n.TG.ArrowClosed,width:15,height:15,color:"Start"===e.from?h:"End"===e.to?b:f}}))];return!r&&e.length>0&&e.forEach((e,t)=>{"Start"===e||a.some(t=>"Start"===t.from&&t.to===e)||o.push({id:"start-".concat(t),source:"__start__",target:e,type:"default",animated:!0,style:{stroke:h,strokeWidth:2},markerEnd:{type:n.TG.ArrowClosed,width:15,height:15,color:h}})}),!s&&t.length>0&&t.forEach((e,t)=>{"End"===e||a.some(t=>t.from===e&&"End"===t.to)||o.push({id:"end-".concat(t),source:e,target:"__end__",type:"default",animated:!0,style:{stroke:b,strokeWidth:2},markerEnd:{type:n.TG.ArrowClosed,width:15,height:15,color:b}})}),o},[a,w,f,h,b]),N=y(),k=j(),[S,_,E]=(0,n.ck)(N),[T,z,C]=(0,n.fM)(k);(0,s.useEffect)(()=>{!v.current&&t.length>0&&(_(y()),z(j()),v.current=!0)},[t,a,y,j]),(0,s.useEffect)(()=>{v.current&&c&&(_(y()),z(j()))},[u]);let A=(0,s.useRef)(null);return(0,s.useEffect)(()=>(S.length>0&&c&&(A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{c.fitView({padding:.5,minZoom:.3,maxZoom:1.5}),A.current=null},100)),()=>{A.current&&clearTimeout(A.current)}),[S.length,c]),(0,s.useCallback)((e,t)=>{d&&"__start__"!==t.id&&"__end__"!==t.id&&"Start"!==t.id&&"End"!==t.id&&d(t.id)},[d]),(0,r.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,r.jsxs)(n.Gc,{nodes:S,edges:T,onNodesChange:E,onEdgesChange:C,onNodeClick:(e,t)=>{"__start__"!==t.id&&"__end__"!==t.id&&"Start"!==t.id&&"End"!==t.id&&d&&d(t.id)},fitView:!0,children:[(0,r.jsx)(o.V,{color:u?"#4a5568":"#e2e8f0",gap:16,size:1,style:{backgroundColor:u?"rgba(15, 23, 42, 0.9)":"white"}}),(0,r.jsx)(i.H,{}),(0,r.jsx)(l.o,{nodeStrokeColor:e=>{var t;return(null==(t=e.style)?void 0:t.background)||"#eee"},nodeColor:e=>{var t;return(null==(t=e.style)?void 0:t.background)||"#eee"},zoomable:!0,pannable:!0})]})})}function c(e){return e.agents&&0!==e.agents.length?(0,r.jsx)("div",{className:"h-[500px] border rounded-xl overflow-hidden bg-background",children:(0,r.jsx)(n.Ln,{children:(0,r.jsx)(d,{...e})})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-[400px] bg-card/30 backdrop-blur-sm rounded-xl border border-border",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No agents available to display"})})}a(1687)},2523:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(5155);a(2115);var s=a(9434);function n(e){let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},4165:(e,t,a)=>{a.d(t,{Cf:()=>c,Es:()=>m,L3:()=>x,c7:()=>u,lG:()=>i,rr:()=>g});var r=a(5155);a(2115);var s=a(5452),n=a(4416),o=a(9434);function i(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"dialog",...t})}function l(e){let{...t}=e;return(0,r.jsx)(s.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,r.jsx)(s.hJ,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",t),...a})}function c(e){let{className:t,children:a,...i}=e;return(0,r.jsxs)(l,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(s.UC,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed left-[50%] top-[50%] z-50 grid w-full max-w-3xl translate-x-[-50%] translate-y-[-50%] gap-4 shadow-lg duration-200 sm:rounded-lg border-0 !border-none p-6",t),style:{border:"none"},...i,children:[a,(0,r.jsxs)(s.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,r.jsx)(n.A,{className:"size-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,o.cn)("flex flex-col space-y-1.5 border-b border-border px-6 py-4",t),...a})}function m(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 border-t border-border px-6 py-4",t),...a})}function x(e){let{className:t,...a}=e;return(0,r.jsx)(s.hE,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg font-semibold",t),...a})}function g(e){let{className:t,...a}=e;return(0,r.jsx)(s.VY,{"data-slot":"dialog-description",className:(0,o.cn)("text-sm text-muted-foreground",t),...a})}},4300:(e,t,a)=>{a.d(t,{x:()=>r});async function r(e){try{let t=await fetch("".concat("http://0.0.0.0:5001/api","/update_agent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Error updating agent: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to update agent:",e),e}}},4649:(e,t,a)=>{a.d(t,{D:()=>s});var r=a(5155);function s(){return(0,r.jsx)("header",{className:"flex h-(--header-height) shrink-0 items-center gap-2 border-b transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-(--header-height)",children:(0,r.jsx)("div",{className:"flex w-full items-center gap-1 px-4 lg:gap-2 lg:px-6",children:(0,r.jsx)("h1",{className:"text-base font-medium",children:"Agen Sight Studio"})})})}},4684:(e,t,a)=>{a.d(t,{Cg:()=>o,cr:()=>n,m0:()=>s,x4:()=>l,yx:()=>i});let r="http://0.0.0.0:5001/api";async function s(){try{let e=await fetch("".concat(r,"/config/versions"));if(!e.ok)throw Error("Error fetching config versions: ".concat(e.statusText));return await e.json()}catch(e){throw console.error("Failed to fetch config versions:",e),e}}async function n(e){try{let t=await fetch("".concat(r,"/config?version=").concat(encodeURIComponent(e)));if(!t.ok)throw Error("Error fetching config version ".concat(e,": ").concat(t.statusText));return await t.json()}catch(t){throw console.error("Failed to fetch config version ".concat(e,":"),t),t}}async function o(e){try{let t=await fetch("".concat(r,"/config/sync"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({version:e})});if(!t.ok)throw Error("Error syncing config version ".concat(e,": ").concat(t.statusText));return await t.json()}catch(t){throw console.error("Failed to sync config version ".concat(e,":"),t),t}}async function i(e){try{let t=await fetch("".concat(r,"/config/commit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Error committing config version: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to commit config version:",e),e}}async function l(e){try{e.config_version&&(e.config_version=String(e.config_version)),console.log("In config.ts updateAgent - Sending data:",JSON.stringify(e,null,2)),console.log("Config version type:",typeof e.config_version);let t=await fetch("".concat(r,"/update_agent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){console.error("Error response from update_agent:",t.status,t.statusText);let e=await t.text();throw console.error("Error body:",e),Error("Error updating agent: ".concat(t.statusText))}let a=await t.json();return console.log("Update agent response:",a),a}catch(e){throw console.error("Failed to update agent:",e),e}}},5057:(e,t,a)=>{a.d(t,{J:()=>o});var r=a(5155);a(2115);var s=a(968),n=a(9434);function o(e){let{className:t,...a}=e;return(0,r.jsx)(s.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},6102:(e,t,a)=>{a.d(t,{Bc:()=>o,ZI:()=>d,k$:()=>l,m_:()=>i});var r=a(5155);a(2115);var s=a(9613),n=a(9434);function o(e){let{delayDuration:t=0,...a}=e;return(0,r.jsx)(s.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function i(e){let{...t}=e;return(0,r.jsx)(o,{children:(0,r.jsx)(s.bL,{"data-slot":"tooltip",...t})})}function l(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"tooltip-trigger",...t})}function d(e){let{className:t,sideOffset:a=0,children:o,...i}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,n.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[o,(0,r.jsx)(s.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},6126:(e,t,a)=>{a.d(t,{E:()=>i});var r=a(5155);a(2115);var s=a(2085),n=a(9434);let o=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(o({variant:a}),t),...s})}},7262:(e,t,a)=>{a.d(t,{S:()=>l});var r=a(5155),s=a(2115),n=a(6981),o=a(5196),i=a(9434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(n.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(o.A,{className:"h-3.5 w-3.5"})})})});l.displayName=n.bL.displayName},7280:(e,t,a)=>{a.d(t,{D:()=>i,ThemeProvider:()=>o});var r=a(5155),s=a(2115);let n=(0,s.createContext)({theme:"system",setTheme:()=>null,darkMode:!1,toggleDarkMode:()=>null});function o(e){let{children:t,defaultTheme:a="system",enableSystem:o=!0,attribute:i="data-theme"}=e,[l,d]=(0,s.useState)(a),[c,u]=(0,s.useState)("dark"===a);return(0,s.useEffect)(()=>{let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===l&&o){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t),u("dark"===t)}else e.classList.add(l),u("dark"===l)},[l,o]),(0,r.jsx)(n.Provider,{value:{theme:l,setTheme:d,darkMode:c,toggleDarkMode:()=>{d(c?"light":"dark")}},children:t})}let i=()=>{let e=(0,s.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},7313:(e,t,a)=>{a.d(t,{Xi:()=>l,av:()=>d,j7:()=>i,tU:()=>o});var r=a(5155);a(2115);var s=a(64),n=a(9434);function o(e){let{className:t,...a}=e;return(0,r.jsx)(s.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)(s.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)(s.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 cursor-pointer disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)(s.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",t),...a})}},7652:(e,t,a)=>{a.d(t,{_K:()=>o,um:()=>s,zi:()=>n});let r="http://0.0.0.0:5001/api";async function s(e){for(let t=1;t<=3;t++)try{console.log("Fetching trace with ID ".concat(e," (attempt ").concat(t,"/").concat(3,")..."));let a=await fetch("".concat(r,"/traces/").concat(e,"/spans"));if(!a.ok){let e=await a.text();throw console.error("Error fetching trace: ".concat(a.status," ").concat(a.statusText),e),Error("Error fetching trace: ".concat(a.statusText))}let s=await a.json();return console.log("Successfully fetched trace data:",s),s}catch(a){if(console.error("Failed to fetch trace with ID ".concat(e," (attempt ").concat(t,"/").concat(3,"):"),a),3===t)throw a;await new Promise(e=>setTimeout(e,500*Math.pow(2,t-1)))}}async function n(e){for(let t=1;t<=3;t++)try{console.log("Fetching span details for ID ".concat(e," (attempt ").concat(t,"/").concat(3,")..."));let a=await fetch("".concat(r,"/span/").concat(e,"/details"));if(!a.ok){let e=await a.text();throw console.error("Error fetching span details: ".concat(a.status," ").concat(a.statusText),e),Error("Error fetching span details: ".concat(a.statusText))}let s=await a.json();return console.log("Successfully fetched span details:",s),s}catch(a){if(console.error("Failed to fetch span details with ID ".concat(e," (attempt ").concat(t,"/").concat(3,"):"),a),3===t)throw a;await new Promise(e=>setTimeout(e,500*Math.pow(2,t-1)))}throw Error("Failed to fetch span details")}async function o(){console.log("getAllTraces CALLED");for(let e=1;e<=3;e++)try{console.log("Fetching all traces (attempt ".concat(e,"/").concat(3,")..."));let t=await fetch("".concat(r,"/traces"));if(!t.ok){let e=await t.text();throw console.error("Error fetching traces: ".concat(t.status," ").concat(t.statusText),e),Error("Error fetching traces: ".concat(t.statusText))}let a=await t.json();return console.log("Successfully fetched all traces:",a),a}catch(t){if(console.error("Failed to fetch all traces (attempt ".concat(e,"/").concat(3,"):"),t),3===e)throw t;await new Promise(t=>setTimeout(t,500*Math.pow(2,e-1)))}return[]}},8262:(e,t,a)=>{a.d(t,{dj:()=>m,oR:()=>u});var r=a(2115);let s=0,n=new Map,o=(e,t)=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},t||5e3);n.set(e,a)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;if(a){let t=e.toasts.find(e=>e.id===a);o(a,null==t?void 0:t.duration)}else e.toasts.forEach(e=>{o(e.id,e.duration)});return{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_VALUE).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return 0!==t.duration&&setTimeout(()=>{r()},t.duration||5e3),c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8856:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(5155),s=a(9434);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"skeleton",className:(0,s.cn)("bg-accent animate-pulse rounded-md",t),...a})}},9197:(e,t,a)=>{a.d(t,{D:()=>E});var r=a(5155),s=a(2115),n=a(5143),o=a(1206),i=a(402),l=a(6268),d=a(8266),c=a(4392),u=a(2957),m=a(9318),x=a(7029),g=a(5695),p=a(9434),f=a(5594),h=a(1032),b=a(6126);let v=f.z.object({args:f.z.record(f.z.string()),duration:f.z.number(),name:f.z.string(),output:f.z.string(),span_id:f.z.string()}),w=f.z.object({duration:f.z.number(),end_time:f.z.number(),final_completion:f.z.string(),name:f.z.string(),span_id:f.z.string(),start_time:f.z.number(),tools_called:f.z.array(v)});f.z.object({id:f.z.string().or(f.z.number()),name:f.z.string(),session_id:f.z.string(),started_at:f.z.string().or(f.z.number()),ended_at:f.z.string().or(f.z.number()),metadata:f.z.string(),spans:f.z.array(w).optional()});var y=a(285),j=a(5057),N=a(9409),k=a(7313);let S=[{accessorKey:"id",header:"Id",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,r.jsx)("div",{className:"truncate",children:t.original.id})})},size:320},{accessorKey:"name",header:"Name",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,r.jsx)("div",{className:"truncate",children:t.original.name})})},size:200},{accessorKey:"latency",header:"Latency",cell:e=>{let{row:t}=e,a=new Date(t.original.ended_at).getTime()-new Date(t.original.started_at).getTime();return(0,r.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,r.jsxs)("div",{className:"truncate",children:[Math.floor(a/1e3),"s"]})})},size:200},{accessorKey:"metadata",header:"Metadata",cell:e=>{let{row:t}=e;try{let e=JSON.parse(t.original.metadata),a=["status","priority","user_id"],s=Object.keys(e).filter(e=>a.includes(e)).slice(0,3);if(0===s.length)return(0,r.jsx)("div",{className:"w-full text-sm text-muted-foreground overflow-hidden text-ellipsis px-2",children:"No priority metadata"});return(0,r.jsx)("div",{className:"w-full text-sm overflow-hidden px-2",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:s.map(t=>(0,r.jsxs)("div",{className:"text-xs bg-muted px-2 py-1 rounded",children:[t,": ",String(e[t])]},t))})})}catch(e){return(0,r.jsx)("div",{className:"w-full text-sm text-muted-foreground overflow-hidden text-ellipsis px-2",children:"Invalid metadata"})}},size:200}];function _(e){let{row:t,onRowClick:a}=e,{transform:s,transition:n,setNodeRef:o,isDragging:c}=(0,i.gl)({id:t.original.id});return(0,r.jsx)("tr",{"data-state":t.getIsSelected()&&"selected","data-dragging":c,ref:o,className:"relative z-0 data-[dragging=true]:z-10 data-[dragging=true]:opacity-80 hover:bg-muted cursor-pointer",style:{transform:d.Ks.Transform.toString(s),transition:n},onClick:()=>{a(t.original.id)},children:t.getVisibleCells().map((e,t)=>(0,r.jsx)("td",{className:(0,p.cn)("px-4 py-3 align-middle whitespace-nowrap overflow-hidden text-base border-b",0===t&&"sticky left-0 z-10 bg-background"),style:{width:150!==e.column.getSize()?"".concat(e.column.getSize(),"px"):void 0},children:(0,l.Kv)(e.column.columnDef.cell,e.getContext())},e.id))})}function E(e){var t;let{data:a}=e,[d,f]=(0,s.useState)(()=>a),{table:v}=function(e){let[t,a]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[i,d]=(0,s.useState)({}),[c,u]=(0,s.useState)({}),[m,x]=(0,s.useState)([]),g=(0,s.useMemo)(()=>[{accessorKey:"id",header:"ID",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"font-mono text-sm px-4 py-3",children:t.getValue("id")})}},{accessorKey:"name",header:"Name",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"font-medium text-base px-4 py-3",children:t.getValue("name")})}},{accessorKey:"session_id",header:"Session",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsx)(b.E,{variant:"outline",className:"font-mono text-sm",children:t.getValue("session_id")})})}},{id:"latency",header:"Latency",cell:e=>{let{row:t}=e;try{let e,a=t.original,s=a.started_at,n=a.ended_at;if(!s||!n)return(0,r.jsx)("div",{className:"text-sm text-muted-foreground px-4 py-3",children:"Missing data"});let o=new Date(s),i=new Date(n);if(isNaN(o.getTime())||isNaN(i.getTime()))return(0,r.jsx)("div",{className:"text-sm text-muted-foreground px-4 py-3",children:"Invalid dates"});let l=i.getTime()-o.getTime();if(l<0)return(0,r.jsx)("div",{className:"text-sm text-muted-foreground px-4 py-3",children:"Invalid duration"});if(l<1e3)e="".concat(l,"ms");else if(l<6e4)e="".concat((l/1e3).toFixed(2),"s");else{let t=Math.floor(l/6e4),a=Math.floor(l%6e4/1e3);e="".concat(t,"m ").concat(a,"s")}return(0,r.jsx)("div",{className:"text-base font-medium px-4 py-3",children:e})}catch(e){return console.error("Latency calculation error:",e),(0,r.jsx)("div",{className:"text-sm text-muted-foreground px-4 py-3",children:"Error"})}}},{accessorKey:"metadata",header:"Metadata",cell:e=>{let{row:t}=e;try{let e=JSON.parse(t.getValue("metadata")),a=["status","priority","user_id"],s=Object.keys(e).filter(e=>a.includes(e)).slice(0,3);return(0,r.jsx)("div",{className:"text-sm px-4 py-3",children:s.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(t=>(0,r.jsxs)(b.E,{variant:"outline",className:"text-xs",children:[t,": ",String(e[t])]},t))}):(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"No priority metadata"})})}catch(e){return(0,r.jsx)("div",{className:"text-xs text-muted-foreground px-4 py-3",children:"Invalid metadata"})}}}],[]),p=Array.isArray(e)?e:e.data,f=Array.isArray(e)?g:e.columns;return{table:(0,l.N4)({data:p,columns:f,state:{sorting:t,columnFilters:n,columnVisibility:i,rowSelection:c},enableRowSelection:!0,onRowSelectionChange:u,onSortingChange:a,onColumnFiltersChange:o,onColumnVisibilityChange:d,getCoreRowModel:(0,h.HT)(),getPaginationRowModel:(0,h.kW)(),getSortedRowModel:(0,h.h5)(),getFilteredRowModel:(0,h.hM)()}),columns:f,selectedTraces:m,toggleTraceSelection:e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},clearSelectedTraces:()=>{x([])}}}({data:d,columns:S});s.useEffect(()=>{v.setPageSize(10)},[v]);let w=s.useId(),E=(0,n.FR)((0,n.MS)(n.cA,{}),(0,n.MS)(n.IG,{}),(0,n.MS)(n.uN,{})),T=(0,g.useRouter)(),z=e=>{sessionStorage.setItem("tracesTableScrollPosition",window.scrollY.toString()),sessionStorage.setItem("tracesTableState",JSON.stringify({pagination:v.getState().pagination,sorting:v.getState().sorting,columnFilters:v.getState().columnFilters})),T.push("/trace?id=".concat(e),{scroll:!1})};return s.useEffect(()=>{let e=sessionStorage.getItem("tracesTableState");if(e)try{let{pagination:t,sorting:a,columnFilters:r}=JSON.parse(e);t&&v.setPagination(t),a&&v.setSorting(a),r&&v.setColumnFilters(r)}catch(e){console.error("Error restoring table state:",e)}let t=sessionStorage.getItem("tracesTableScrollPosition");t&&window.scrollTo(0,parseInt(t))},[v]),(0,r.jsx)(k.tU,{defaultValue:"outline",className:"w-full h-full flex flex-col",children:(0,r.jsx)(k.av,{value:"outline",className:"relative flex flex-col h-full",children:(0,r.jsxs)(n.Mp,{collisionDetection:n.fp,modifiers:[o.FN],onDragEnd:function(e){let{active:t,over:a}=e;t&&a&&t.id!==a.id&&f(e=>{let r=e.findIndex(e=>e.id===t.id),s=e.findIndex(e=>e.id===a.id);return(0,i.be)(e,r,s)})},sensors:E,id:w,children:[(0,r.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,r.jsx)("div",{className:"w-full flex-1 overflow-hidden flex flex-col",children:(0,r.jsx)("div",{className:"w-full flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"inline-block min-w-full",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 bg-muted border-b",children:(0,r.jsx)("table",{className:"min-w-full table-fixed border-separate border-spacing-0",children:(0,r.jsx)("thead",{children:v.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map((e,t)=>(0,r.jsx)("th",{className:(0,p.cn)("text-base font-semibold px-4 py-3 text-left whitespace-nowrap border-b",0===t&&"sticky left-0 z-20 bg-muted"),style:{width:150!==e.getSize()?"".concat(e.getSize(),"px"):void 0},children:e.isPlaceholder?null:(0,l.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))})})}),(0,r.jsx)("table",{className:"min-w-full table-fixed border-separate border-spacing-0",children:(0,r.jsx)("tbody",{className:"bg-background",children:(null==(t=v.getRowModel().rows)?void 0:t.length)?(0,r.jsx)(i.gB,{items:d.map(e=>e.id),strategy:i._G,children:v.getRowModel().rows.map(e=>(0,r.jsx)(_,{row:e,onRowClick:z},e.id))}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:v.getAllColumns().length,className:"h-24 text-center border-b",children:"No results."})})})})]})})})})}),(0,r.jsx)("div",{className:"bg-background py-2 px-4 flex-shrink-0 sticky bottom-0 z-10 shadow-[0_-2px_10px_rgba(0,0,0,0.1)] dark:shadow-[0_-2px_10px_rgba(0,0,0,0.25)]",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-muted-foreground text-base",children:[v.getFilteredSelectedRowModel().rows.length," of"," ",v.getFilteredRowModel().rows.length," row(s) selected."]}),(0,r.jsxs)("div",{className:"flex items-center gap-8 ml-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(j.J,{htmlFor:"rows-per-page",className:"text-base font-medium",children:"Rows per page"}),(0,r.jsxs)(N.l6,{value:"".concat(v.getState().pagination.pageSize),onValueChange:e=>{v.setPageSize(Number(e))},children:[(0,r.jsx)(N.bq,{size:"sm",className:"w-20 text-base",id:"rows-per-page",children:(0,r.jsx)(N.yv,{placeholder:v.getState().pagination.pageSize})}),(0,r.jsx)(N.gC,{side:"top",children:[10,20,30,40,50].map(e=>(0,r.jsx)(N.eb,{value:"".concat(e),className:"text-base",children:e},e))})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center text-base font-medium",children:["Page ",v.getState().pagination.pageIndex+1," of"," ",v.getPageCount()]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(y.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>v.setPageIndex(0),disabled:!v.getCanPreviousPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,r.jsx)(c.A,{className:"h-4 w-4"})]}),(0,r.jsxs)(y.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>v.previousPage(),disabled:!v.getCanPreviousPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,r.jsx)(u.A,{className:"h-4 w-4"})]}),(0,r.jsxs)(y.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>v.nextPage(),disabled:!v.getCanNextPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,r.jsx)(m.A,{className:"h-4 w-4"})]}),(0,r.jsxs)(y.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>v.setPageIndex(v.getPageCount()-1),disabled:!v.getCanNextPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,r.jsx)(x.A,{className:"h-4 w-4"})]})]})]})]})})]})})})}},9409:(e,t,a)=>{a.d(t,{bq:()=>u,eb:()=>x,gC:()=>m,l6:()=>d,yv:()=>c});var r=a(5155);a(2115);var s=a(4582),n=a(6474),o=a(5196),i=a(7863),l=a(9434);function d(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,r.jsx)(s.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:o,...i}=e;return(0,r.jsxs)(s.l9,{"data-slot":"select-trigger","data-size":a,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[o,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:a,position:n="popper",...o}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...o,children:[(0,r.jsx)(g,{}),(0,r.jsx)(s.LM,{className:(0,l.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,r.jsx)(p,{})]})})}function x(e){let{className:t,children:a,...n}=e;return(0,r.jsxs)(s.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(o.A,{className:"size-4"})})}),(0,r.jsx)(s.p4,{children:a})]})}function g(e){let{className:t,...a}=e;return(0,r.jsx)(s.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(i.A,{className:"size-4"})})}function p(e){let{className:t,...a}=e;return(0,r.jsx)(s.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(n.A,{className:"size-4"})})}},9434:(e,t,a)=>{a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}}}]);
import{Y as Be,E as Ye,aD as Ze,aE as Ve,ap as Ne,o as Xe,aF as et,aG as tt,aH as rt,aI as it,x as nt,n as Se,ak as Ke,al as We,am as st,v as at,p as ot,b as me,a as Ce,s as Oe,h as ye,g as A,c as lt,e as de,d as _e,r as oe}from"./DJ4-OfXg.js";import{b as ut,s as Fe}from"./DpcWkFIJ.js";import{w as ft,l as ht,d as ct}from"./Bcqz6BHu.js";import"./CWj6FrbW.js";import{p as pe,i as He}from"./DU3kBxd7.js";import{a as ke,e as De,i as je}from"./DiyBIa6G.js";import{t as be,a as we}from"./BBucZf18.js";import{o as dt}from"./BCcisXiR.js";const _t=()=>performance.now(),he={tick:i=>requestAnimationFrame(i),now:()=>_t(),tasks:new Set};function Je(){const i=he.now();he.tasks.forEach(n=>{n.c(i)||(he.tasks.delete(n),n.f())}),he.tasks.size!==0&&he.tick(Je)}function pt(i){let n;return he.tasks.size===0&&he.tick(Je),{promise:new Promise(h=>{he.tasks.add(n={c:i,f:h})}),abort(){he.tasks.delete(n)}}}function Le(i,n){ft(()=>{i.dispatchEvent(new CustomEvent(n))})}function gt(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const n=i.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(h=>h[0].toUpperCase()+h.slice(1)).join("")}function Qe(i){const n={},h=i.split(";");for(const a of h){const[d,g]=a.split(":");if(!d||g===void 0)break;const S=gt(d.trim());n[S]=g.trim()}return n}const vt=i=>i;function qt(i,n,h,a){var d=(i&tt)!==0,g=(i&rt)!==0,S=d&&g,k=(i&et)!==0,I=S?"both":d?"in":"out",s,v=n.inert,j=n.style.overflow,P,F;function Z(){var W=st,le=Be;Ke(null),We(null);try{return s??(s=h()(n,(a==null?void 0:a())??{},{direction:I}))}finally{Ke(W),We(le)}}var G={is_global:k,in(){var W;if(n.inert=v,!d){F==null||F.abort(),(W=F==null?void 0:F.reset)==null||W.call(F);return}g||P==null||P.abort(),Le(n,"introstart"),P=Me(n,Z(),F,1,()=>{Le(n,"introend"),P==null||P.abort(),P=s=void 0,n.style.overflow=j})},out(W){if(!g){W==null||W(),s=void 0;return}n.inert=!0,Le(n,"outrostart"),F=Me(n,Z(),P,0,()=>{Le(n,"outroend"),W==null||W()})},stop:()=>{P==null||P.abort(),F==null||F.abort()}},M=Be;if((M.transitions??(M.transitions=[])).push(G),d&&ut){var ee=k;if(!ee){for(var $=M.parent;$&&($.f&Ye)!==0;)for(;($=$.parent)&&($.f&Ze)===0;);ee=!$||($.f&Ve)!==0}ee&&Ne(()=>{Xe(()=>G.in())})}}function Me(i,n,h,a,d){var g=a===1;if(it(n)){var S,k=!1;return nt(()=>{if(!k){var M=n({direction:g?"in":"out"});S=Me(i,M,h,a,d)}}),{abort:()=>{k=!0,S==null||S.abort()},deactivate:()=>S.deactivate(),reset:()=>S.reset(),t:()=>S.t()}}if(h==null||h.deactivate(),!(n!=null&&n.duration))return d(),{abort:Se,deactivate:Se,reset:Se,t:()=>a};const{delay:I=0,css:s,tick:v,easing:j=vt}=n;var P=[];if(g&&h===void 0&&(v&&v(0,1),s)){var F=Qe(s(0,1));P.push(F,F)}var Z=()=>1-a,G=i.animate(P,{duration:I});return G.onfinish=()=>{var M=(h==null?void 0:h.t())??1-a;h==null||h.abort();var ee=a-M,$=n.duration*Math.abs(ee),W=[];if($>0){var le=!1;if(s)for(var ue=Math.ceil($/16.666666666666668),X=0;X<=ue;X+=1){var C=M+ee*j(X/ue),e=Qe(s(C,1-C));W.push(e),le||(le=e.overflow==="hidden")}le&&(i.style.overflow="hidden"),Z=()=>{var t=G.currentTime;return M+ee*j(t/$)},v&&pt(()=>{if(G.playState!=="running")return!1;var t=Z();return v(t,1-t),!0})}G=i.animate(W,{duration:$,fill:"forwards"}),G.onfinish=()=>{Z=()=>a,v==null||v(a,1-a),d()}},{abort:()=>{G&&(G.cancel(),G.effect=null,G.onfinish=Se)},deactivate:()=>{d=Se},reset:()=>{a===0&&(v==null||v(1,0))},t:()=>Z()}}function Ge(i,n,h){if(i.multiple)return yt(i,n);for(var a of i.options){var d=xe(a);if(at(d,n)){a.selected=!0;return}}(!h||n!==void 0)&&(i.selectedIndex=-1)}function mt(i,n){Ne(()=>{var h=new MutationObserver(()=>{var a=i.__value;Ge(i,a)});return h.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{h.disconnect()}})}function Pe(i,n,h=n){var a=!0;ht(i,"change",d=>{var g=d?"[selected]":":checked",S;if(i.multiple)S=[].map.call(i.querySelectorAll(g),xe);else{var k=i.querySelector(g)??i.querySelector("option:not([disabled])");S=k&&xe(k)}h(S)}),Ne(()=>{var d=n();if(Ge(i,d,a),a&&d===void 0){var g=i.querySelector(":checked");g!==null&&(d=xe(g),h(d))}i.__value=d,a=!1}),mt(i)}function yt(i,n){for(var h of i.options)h.selected=~n.indexOf(xe(h))}function xe(i){return"__value"in i?i.__value:i.value}function wt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Te={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var kt=Te.exports,$e;function bt(){return $e||($e=1,function(i,n){((h,a)=>{i.exports=a()})(kt,function h(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},d,g=!a.document&&!!a.postMessage,S=a.IS_PAPA_WORKER||!1,k={},I=0,s={};function v(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=ue(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new G(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var l=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<l){let y=this._config.newline;y||(o=this._config.quoteChar||'"',y=this._handle.guessLineEndings(t,o)),t=[...t.split(y).slice(l)].join(y)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(t))!==void 0&&(t=o),this.isFirstChunk=!1,this._halted=!1;var l=this._partialLine+t,o=(this._partialLine="",this._handle.parse(l,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=o.meta.cursor,l=(this._finished||(this._partialLine=l.substring(t-this._baseIndex),this._baseIndex=t),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),S)a.postMessage({results:o,workerId:s.WORKER_ID,finished:l});else if(C(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!l||!C(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){C(this._config.error)?this._config.error(t):S&&this._config.error&&a.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function j(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),v.call(this,e),this._nextChunk=g?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),g||(t.onload=X(this._chunkLoaded,this),t.onerror=X(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!g),this._config.downloadRequestHeaders){var r,l=this._config.downloadRequestHeaders;for(r in l)t.setRequestHeader(r,l[r])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+o));try{t.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}g&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function P(e){(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),v.call(this,e);var t,r,l=typeof FileReader<"u";this.stream=function(o){this._input=o,r=o.slice||o.webkitSlice||o.mozSlice,l?((t=new FileReader).onload=X(this._chunkLoaded,this),t.onerror=X(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,y=(this._config.chunkSize&&(y=Math.min(this._start+this._config.chunkSize,this._input.size),o=r.call(o,this._start,y)),t.readAsText(o,this._config.encoding));l||this._chunkLoaded({target:{result:y}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(t.error)}}function F(e){var t;v.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,l;if(!this._finished)return r=this._config.chunkSize,t=r?(l=t.substring(0,r),t.substring(r)):(l=t,""),this._finished=!t,this.parseChunk(l)}}function Z(e){v.call(this,e=e||{});var t=[],r=!0,l=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){l&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=X(function(o){try{t.push(typeof o=="string"?o:o.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(y){this._streamError(y)}},this),this._streamError=X(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=X(function(){this._streamCleanUp(),l=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function G(e){var t,r,l,o,y=Math.pow(2,53),w=-y,O=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,x=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,c=this,L=0,u=0,q=!1,_=!1,b=[],f={data:[],errors:[],meta:{}};function H(E){return e.skipEmptyLines==="greedy"?E.join("").trim()==="":E.length===1&&E[0].length===0}function K(){if(f&&l&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),l=!1),e.skipEmptyLines&&(f.data=f.data.filter(function(p){return!H(p)})),Y()){let p=function(B,Q){C(e.transformHeader)&&(B=e.transformHeader(B,Q)),b.push(B)};if(f)if(Array.isArray(f.data[0])){for(var E=0;Y()&&E<f.data.length;E++)f.data[E].forEach(p);f.data.splice(0,1)}else f.data.forEach(p)}function T(p,B){for(var Q=e.header?{}:[],D=0;D<p.length;D++){var N=D,R=p[D],R=((ie,m)=>(U=>(e.dynamicTypingFunction&&e.dynamicTyping[U]===void 0&&(e.dynamicTyping[U]=e.dynamicTypingFunction(U)),(e.dynamicTyping[U]||e.dynamicTyping)===!0))(ie)?m==="true"||m==="TRUE"||m!=="false"&&m!=="FALSE"&&((U=>{if(O.test(U)&&(U=parseFloat(U),w<U&&U<y))return 1})(m)?parseFloat(m):x.test(m)?new Date(m):m===""?null:m):m)(N=e.header?D>=b.length?"__parsed_extra":b[D]:N,R=e.transform?e.transform(R,N):R);N==="__parsed_extra"?(Q[N]=Q[N]||[],Q[N].push(R)):Q[N]=R}return e.header&&(D>b.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+b.length+" fields but parsed "+D,u+B):D<b.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+b.length+" fields but parsed "+D,u+B)),Q}var z;f&&(e.header||e.dynamicTyping||e.transform)&&(z=1,!f.data.length||Array.isArray(f.data[0])?(f.data=f.data.map(T),z=f.data.length):f.data=T(f.data,0),e.header&&f.meta&&(f.meta.fields=b),u+=z)}function Y(){return e.header&&b.length===0}function re(E,T,z,p){E={type:E,code:T,message:z},p!==void 0&&(E.row=p),f.errors.push(E)}C(e.step)&&(o=e.step,e.step=function(E){f=E,Y()?K():(K(),f.data.length!==0&&(L+=E.data.length,e.preview&&L>e.preview?r.abort():(f.data=f.data[0],o(f,c))))}),this.parse=function(E,T,z){var p=e.quoteChar||'"',p=(e.newline||(e.newline=this.guessLineEndings(E,p)),l=!1,e.delimiter?C(e.delimiter)&&(e.delimiter=e.delimiter(E),f.meta.delimiter=e.delimiter):((p=((B,Q,D,N,R)=>{var ie,m,U,ce;R=R||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var ge=0;ge<R.length;ge++){for(var ne,Ee=R[ge],V=0,se=0,J=0,te=(U=void 0,new ee({comments:N,delimiter:Ee,newline:Q,preview:10}).parse(B)),fe=0;fe<te.data.length;fe++)D&&H(te.data[fe])?J++:(ne=te.data[fe].length,se+=ne,U===void 0?U=ne:0<ne&&(V+=Math.abs(ne-U),U=ne));0<te.data.length&&(se/=te.data.length-J),(m===void 0||V<=m)&&(ce===void 0||ce<se)&&1.99<se&&(m=V,ie=Ee,ce=se)}return{successful:!!(e.delimiter=ie),bestDelimiter:ie}})(E,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=p.bestDelimiter:(l=!0,e.delimiter=s.DefaultDelimiter),f.meta.delimiter=e.delimiter),ue(e));return e.preview&&e.header&&p.preview++,t=E,r=new ee(p),f=r.parse(t,T,z),K(),q?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,r.abort(),t=C(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){c.streamer._halted?(q=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return _},this.abort=function(){_=!0,r.abort(),f.meta.aborted=!0,C(e.complete)&&e.complete(f),t=""},this.guessLineEndings=function(B,p){B=B.substring(0,1048576);var p=new RegExp(M(p)+"([^]*?)"+M(p),"gm"),z=(B=B.replace(p,"")).split("\r"),p=B.split(`
`),B=1<p.length&&p[0].length<z[0].length;if(z.length===1||B)return`
`;for(var Q=0,D=0;D<z.length;D++)z[D][0]===`
`&&Q++;return Q>=z.length/2?`\r
`:"\r"}}function M(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(e){var t=(e=e||{}).delimiter,r=e.newline,l=e.comments,o=e.step,y=e.preview,w=e.fastMode,O=null,x=!1,c=e.quoteChar==null?'"':e.quoteChar,L=c;if(e.escapeChar!==void 0&&(L=e.escapeChar),(typeof t!="string"||-1<s.BAD_DELIMITERS.indexOf(t))&&(t=","),l===t)throw new Error("Comment character same as delimiter");l===!0?l="#":(typeof l!="string"||-1<s.BAD_DELIMITERS.indexOf(l))&&(l=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var u=0,q=!1;this.parse=function(_,b,f){if(typeof _!="string")throw new Error("Input must be a string");var H=_.length,K=t.length,Y=r.length,re=l.length,E=C(o),T=[],z=[],p=[],B=u=0;if(!_)return V();if(w||w!==!1&&_.indexOf(c)===-1){for(var Q=_.split(r),D=0;D<Q.length;D++){if(p=Q[D],u+=p.length,D!==Q.length-1)u+=r.length;else if(f)return V();if(!l||p.substring(0,re)!==l){if(E){if(T=[],ce(p.split(t)),se(),q)return V()}else ce(p.split(t));if(y&&y<=D)return T=T.slice(0,y),V(!0)}}return V()}for(var N=_.indexOf(t,u),R=_.indexOf(r,u),ie=new RegExp(M(L)+M(c),"g"),m=_.indexOf(c,u);;)if(_[u]===c)for(m=u,u++;;){if((m=_.indexOf(c,m+1))===-1)return f||z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:T.length,index:u}),ne();if(m===H-1)return ne(_.substring(u,m).replace(ie,c));if(c===L&&_[m+1]===L)m++;else if(c===L||m===0||_[m-1]!==L){N!==-1&&N<m+1&&(N=_.indexOf(t,m+1));var U=ge((R=R!==-1&&R<m+1?_.indexOf(r,m+1):R)===-1?N:Math.min(N,R));if(_.substr(m+1+U,K)===t){p.push(_.substring(u,m).replace(ie,c)),_[u=m+1+U+K]!==c&&(m=_.indexOf(c,u)),N=_.indexOf(t,u),R=_.indexOf(r,u);break}if(U=ge(R),_.substring(m+1+U,m+1+U+Y)===r){if(p.push(_.substring(u,m).replace(ie,c)),Ee(m+1+U+Y),N=_.indexOf(t,u),m=_.indexOf(c,u),E&&(se(),q))return V();if(y&&T.length>=y)return V(!0);break}z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:T.length,index:u}),m++}}else if(l&&p.length===0&&_.substring(u,u+re)===l){if(R===-1)return V();u=R+Y,R=_.indexOf(r,u),N=_.indexOf(t,u)}else if(N!==-1&&(N<R||R===-1))p.push(_.substring(u,N)),u=N+K,N=_.indexOf(t,u);else{if(R===-1)break;if(p.push(_.substring(u,R)),Ee(R+Y),E&&(se(),q))return V();if(y&&T.length>=y)return V(!0)}return ne();function ce(J){T.push(J),B=u}function ge(J){var te=0;return te=J!==-1&&(J=_.substring(m+1,J))&&J.trim()===""?J.length:te}function ne(J){return f||(J===void 0&&(J=_.substring(u)),p.push(J),u=H,ce(p),E&&se()),V()}function Ee(J){u=J,ce(p),p=[],R=_.indexOf(r,u)}function V(J){if(e.header&&!b&&T.length&&!x){var te=T[0],fe={},Ae=new Set(te);let qe=!1;for(let ve=0;ve<te.length;ve++){let ae=te[ve];if(fe[ae=C(e.transformHeader)?e.transformHeader(ae,ve):ae]){let Re,ze=fe[ae];for(;Re=ae+"_"+ze,ze++,Ae.has(Re););Ae.add(Re),te[ve]=Re,fe[ae]++,qe=!0,(O=O===null?{}:O)[Re]=ae}else fe[ae]=1,te[ve]=ae;Ae.add(ae)}qe&&console.warn("Duplicate headers found and renamed."),x=!0}return{data:T,errors:z,meta:{delimiter:t,linebreak:r,aborted:q,truncated:!!J,cursor:B+(b||0),renamedHeaders:O}}}function se(){o(V()),T=[],z=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return u}}function $(e){var t=e.data,r=k[t.workerId],l=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){l=!0,W(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:le,resume:le};if(C(r.userStep)){for(var y=0;y<t.results.data.length&&(r.userStep({data:t.results.data[y],errors:t.results.errors,meta:t.results.meta},o),!l);y++);delete t.results}else C(r.userChunk)&&(r.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!l&&W(t.workerId,t.results)}function W(e,t){var r=k[e];C(r.userComplete)&&r.userComplete(t),r.terminate(),delete k[e]}function le(){throw new Error("Not implemented.")}function ue(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=ue(e[t]);return r}function X(e,t){return function(){e.apply(t,arguments)}}function C(e){return typeof e=="function"}return s.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(C(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!C(t.transform)&&t.transform,!t.worker||!s.WORKERS_SUPPORTED)return r=null,s.NODE_STREAM_INPUT,typeof e=="string"?(e=(l=>l.charCodeAt(0)!==65279?l:l.slice(1))(e),r=new(t.download?j:F)(t)):e.readable===!0&&C(e.read)&&C(e.on)?r=new Z(t):(a.File&&e instanceof File||e instanceof Object)&&(r=new P(t)),r.stream(e);(r=(()=>{var l;return!!s.WORKERS_SUPPORTED&&(l=(()=>{var o=a.URL||a.webkitURL||null,y=h.toString();return s.BLOB_URL||(s.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",y,")();"],{type:"text/javascript"})))})(),(l=new a.Worker(l)).onmessage=$,l.id=I++,k[l.id]=l)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=C(t.step),t.chunk=C(t.chunk),t.complete=C(t.complete),t.error=C(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},s.unparse=function(e,t){var r=!1,l=!0,o=",",y=`\r
`,w='"',O=w+w,x=!1,c=null,L=!1,u=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||s.BAD_DELIMITERS.filter(function(b){return t.delimiter.indexOf(b)!==-1}).length||(o=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(x=t.skipEmptyLines),typeof t.newline=="string"&&(y=t.newline),typeof t.quoteChar=="string"&&(w=t.quoteChar),typeof t.header=="boolean"&&(l=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");c=t.columns}t.escapeChar!==void 0&&(O=t.escapeChar+w),t.escapeFormulae instanceof RegExp?L=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(L=/^[=+\-@\t\r].*$/)}})(),new RegExp(M(w),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return q(null,e,x);if(typeof e[0]=="object")return q(c||Object.keys(e[0]),e,x)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),q(e.fields||[],e.data||[],x);throw new Error("Unable to serialize unrecognized input");function q(b,f,H){var K="",Y=(typeof b=="string"&&(b=JSON.parse(b)),typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(b)&&0<b.length),re=!Array.isArray(f[0]);if(Y&&l){for(var E=0;E<b.length;E++)0<E&&(K+=o),K+=_(b[E],E);0<f.length&&(K+=y)}for(var T=0;T<f.length;T++){var z=(Y?b:f[T]).length,p=!1,B=Y?Object.keys(f[T]).length===0:f[T].length===0;if(H&&!Y&&(p=H==="greedy"?f[T].join("").trim()==="":f[T].length===1&&f[T][0].length===0),H==="greedy"&&Y){for(var Q=[],D=0;D<z;D++){var N=re?b[D]:D;Q.push(f[T][N])}p=Q.join("").trim()===""}if(!p){for(var R=0;R<z;R++){0<R&&!B&&(K+=o);var ie=Y&&re?b[R]:R;K+=_(f[T][ie],R)}T<f.length-1&&(!H||0<z&&!B)&&(K+=y)}}return K}function _(b,f){var H,K;return b==null?"":b.constructor===Date?JSON.stringify(b).slice(1,25):(K=!1,L&&typeof b=="string"&&L.test(b)&&(b="'"+b,K=!0),H=b.toString().replace(u,O),(K=K||r===!0||typeof r=="function"&&r(b,f)||Array.isArray(r)&&r[f]||((Y,re)=>{for(var E=0;E<re.length;E++)if(-1<Y.indexOf(re[E]))return!0;return!1})(H,s.BAD_DELIMITERS)||-1<H.indexOf(o)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?w+H+w:H)}},s.RECORD_SEP="",s.UNIT_SEP="",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!g&&!!a.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=ee,s.ParserHandle=G,s.NetworkStreamer=j,s.FileStreamer=P,s.StringStreamer=F,s.ReadableStreamStreamer=Z,a.jQuery&&((d=a.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(y){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var w=0;w<this.files.length;w++)r.push({file:this.files[w],inputElem:this,instanceConfig:d.extend({},t)})}),l(),this;function l(){if(r.length===0)C(e.complete)&&e.complete();else{var y,w,O,x,c=r[0];if(C(e.before)){var L=e.before(c.file,c.inputElem);if(typeof L=="object"){if(L.action==="abort")return y="AbortError",w=c.file,O=c.inputElem,x=L.reason,void(C(e.error)&&e.error({name:y},w,O,x));if(L.action==="skip")return void o();typeof L.config=="object"&&(c.instanceConfig=d.extend(c.instanceConfig,L.config))}else if(L==="skip")return void o()}var u=c.instanceConfig.complete;c.instanceConfig.complete=function(q){C(u)&&u(q,c.file,c.inputElem),o()},s.parse(c.file,c.instanceConfig)}}function o(){r.splice(0,1),l()}}),S&&(a.onmessage=function(e){e=e.data,s.WORKER_ID===void 0&&e&&(s.WORKER_ID=e.workerId),typeof e.input=="string"?a.postMessage({workerId:s.WORKER_ID,results:s.parse(e.input,e.config),finished:!0}):(a.File&&e.input instanceof File||e.input instanceof Object)&&(e=s.parse(e.input,e.config))&&a.postMessage({workerId:s.WORKER_ID,results:e,finished:!0})}),(j.prototype=Object.create(v.prototype)).constructor=j,(P.prototype=Object.create(v.prototype)).constructor=P,(F.prototype=Object.create(F.prototype)).constructor=F,(Z.prototype=Object.create(v.prototype)).constructor=Z,s})}(Te)),Te.exports}var Et=bt();const Ie=wt(Et);async function Rt(){let i=ke.PUBLIC_TEMPLE_URL+"solutions/list",n=await fetch(i,{cache:"no-store"});if(!n.ok)return alert("could not fetch "+i),[];let h=await n.json();return h.sort((a,d)=>a.name<d.name?-1:a.name>d.name?1:0),h}async function St(i){const n=ke.PUBLIC_TEMPLE_URL+`solutions/get_detail/${i}`;let h=await fetch(n,{cache:"no-store"});if(!h.ok)throw alert("Could not fetch "+n),new Error("Could not fetch "+n);return await h.json()}async function zt(i,n,h){let a=await(await fetch(ke.PUBLIC_TEMPLE_URL+`solutions/get_unit/${i}/${n}?scenario=${h}`,{cache:"no-store"})).json();return a!=null&&(a=Ie.parse(a,{delimiter:",",header:!0,newline:`
`})),a}async function Bt(i,n,h,a,d,g){const S=ke.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${i}/${n}/${h}?scenario=${a}&year=${d}&rolling_average_size=${g}`;let k=await fetch(S,{cache:"no-store"});if(!k.ok)throw alert("Could not fetch "+S),new Error("Could not fetch "+S);let I=await k.json(),s=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output"],v={};for(const j of s)I[j]!==void 0&&(v[j]=Ue(I[j]));return v}function Ue(i,n=0,h=1){if(i.slice(0,i.indexOf(`
`)).split(",").length==2){let k=i.split(`
`),I="",s="";for(const v of k.slice(1,k.length)){if(v=="")continue;let j=v.split(",");I+=j[0]+",",s+=j[1]+","}i=I.substring(0,I.length-1)+`
`+s.substring(0,s.length-1)}i.slice(-1)==`
`&&(i=i.slice(0,-1));function g(k){let[I,...s]=k.split(`
`),v=I.split(",");return v=v.map(j=>isNaN(Number(j))?j:String(Number(j)*h+n)),[v.join(","),...s].join(`
`)}return Ie.parse(g(i),{delimiter:",",header:!0,newline:`
`})}async function Kt(i,n,h,a=0,d=1,g=0){const S=ke.PUBLIC_TEMPLE_URL+`solutions/get_total/${i}/${n}?scenario=${h}&year=${g}`;let k=await fetch(S,{cache:"no-store"});if(!k.ok)throw alert("Error when fetching "+S),new Error("Error when fetching "+S);let I=await k.json(),s=Ue(I.data_csv,a,d),v=null;return I.unit!=null&&(I.unit.slice(-1)==`
`&&(I.unit=I.unit.slice(0,I.unit.length-1)),v=Ie.parse(I.unit,{delimiter:",",header:!0,newline:`
`})),s.data=s.data.filter(P=>{for(const F in P){let Z=Number(F);if(!Number.isNaN(Z)&&!Number.isNaN(P[F])&&Math.abs(P[F])>0)return!0}return!1}),{unit:v,data:s}}async function Wt(i,n,h,a=0,d=1){const g=ke.PUBLIC_TEMPLE_URL+`solutions/get_full_ts/${i}/${n}?scenario=${h}&year=${a}&rolling_average_size=${d}`;let S=await fetch(g,{cache:"no-store"});if(!S.ok)throw alert("Error when fetching "+g),new Error("Error when fetching "+g);let k=await S.json(),I=Ue(k.data_csv),s=null;return k.unit!=null&&(k.unit.slice(-1)==`
`&&(k.unit=k.unit.slice(0,k.unit.length-1)),s=Ie.parse(k.unit,{delimiter:",",header:!0,newline:`
`})),{unit:s,data:I}}var Ct=be("<option> </option>"),Ot=be("<option> </option>"),xt=be('<div class="col-4"><h3>Subsolution</h3> <select class="form-select"></select></div>'),Lt=be("<option> </option>"),Tt=be('<div class="col-4"><h3>Scenario</h3> <select class="form-select"></select></div>'),It=be('<div class="row align-items-end"><div class="col-4"><h3>Solution</h3> <select class="form-select"></select></div> <!> <!></div>');function Ht(i,n){ot(n,!0);let h=[],a=me({}),d=Ce(""),g=Ce(void 0),S=null,k=[],I=Ce(""),s,v=Ce(null),j=Ce(me([])),P=pe(n,"carriers",31,()=>me([])),F=pe(n,"nodes",31,()=>me([])),Z=pe(n,"edges",31,()=>me([])),G=pe(n,"years",31,()=>me([])),M=pe(n,"selected_solution",15),ee=pe(n,"loading",15,!1),$=pe(n,"enabled",3,!0);dt(async function(){h=await Rt(),k=[];for(const w of h){let O=w.name.split(".");k.push(O),O[0]in a||(a[O[0]]=[]),O.length>1&&a[O[0]].push(O[1])}});function W(){de(j,a[A(I)],!0),de(v,null),A(j).length==0&&(s=A(I),ue())}function le(){s=A(I)+"."+A(v),ue()}async function ue(){ee(!0),de(g,await St(s),!0),Object.keys(A(g).scenarios).length==1?(de(d,Object.keys(A(g).scenarios)[0],!0),X()):(M(null),de(d,""),n.solution_selected(null)),ee(!1)}async function X(){if(A(g)==null)return;S=A(g).scenarios[A(d)];let w={solution_name:s,scenario_name:A(d),detail:S,components:A(g).components,version:A(g).version};if(M(w),M()==null)return;P(M().detail.system.set_carriers.slice()),F(M().detail.system.set_nodes),Z(Object.keys(M().detail.edges));let O=[...Array(M().detail.system.optimized_years).keys()];G(O.map(x=>x*M().detail.system.interval_between_years+M().detail.system.reference_year)),n.solution_selected(w)}var C=It(),e=_e(C),t=Oe(_e(e),2);t.__change=W,De(t,21,()=>Object.keys(a),je,(w,O)=>{var x=Ct(),c={},L=_e(x,!0);oe(x),ye(()=>{c!==(c=A(O))&&(x.value=(x.__value=A(O))??""),Fe(L,A(O))}),we(w,x)}),oe(t),oe(e);var r=Oe(e,2);{var l=w=>{var O=xt(),x=Oe(_e(O),2);x.__change=le,De(x,21,()=>A(j),je,(c,L)=>{var u=Ot(),q={},_=_e(u,!0);oe(u),ye(()=>{q!==(q=A(L))&&(u.value=(u.__value=A(L))??""),Fe(_,A(L))}),we(c,u)}),oe(x),oe(O),ye(()=>x.disabled=!$()),Pe(x,()=>A(v),c=>de(v,c)),we(w,O)};He(r,w=>{A(j).length>0&&w(l)})}var o=Oe(r,2);{var y=w=>{var O=Tt(),x=Oe(_e(O),2);x.__change=X,De(x,21,()=>Object.keys(A(g).scenarios),je,(c,L)=>{var u=Lt(),q={},_=_e(u,!0);oe(u),ye(()=>{q!==(q=A(L))&&(u.value=(u.__value=A(L))??""),Fe(_,A(L))}),we(c,u)}),oe(x),oe(O),ye(()=>x.disabled=!$()),Pe(x,()=>A(d),c=>de(d,c)),we(w,O)};He(o,w=>{A(g)!=null&&Object.keys(A(g).scenarios).length>1&&w(y)})}oe(C),ye(()=>t.disabled=!$()),Pe(t,()=>A(I),w=>de(I,w)),we(i,C),lt()}ct(["change"]);export{Ht as S,zt as a,Wt as b,Pe as c,Kt as d,wt as e,Bt as g,qt as t};

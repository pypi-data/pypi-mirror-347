[build-system]
build-backend = 'setuptools.build_meta'

requires = [
  "setuptools>=64",
  "setuptools-scm>=8",
  "wheel",
]

[project]
name = "object-clerk"
description = "A wrapper for select object operations using boto3 for Ceph which confirms integrity of reads and heals intermittent connectivity."
readme = "README.rst"
license = { text = "MIT" }
authors = [
  { name = "NSO / AURA", email = "dkistdc@nso.edu" },
]
requires-python = ">=3.8"
classifiers = [
  "Programming Language :: Python",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.8",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
]
dynamic = [ "version" ]
dependencies = [
  "boto3>=1.11.10,<2",
  "retry>=0.9.2,<1",
]

optional-dependencies.test = [
  "pytest",
  "pytest-cov",
]

urls.repository = "https://bitbucket.org/dkistdc/object_clerk"

[tool.setuptools.packages]
find = {}

[tool.setuptools_scm]

[tool.black]
line-length = 100

[tool.pytest.ini_options]
minversion = "3.0"
testpaths = [
  "object_clerk",
]
norecursedirs = [ ".tox", "build", "docs/_build", "docs/generated", "*.egg-info", "examples" ]
markers = [
  "development: For tests that can only be run while developing with available dependencies (as opposed to in bitbucket pipelines)",
  "long: For test that take a long time so that they can be easily filtered if needed",
]

[tool.coverage.run]
source = [ "object_clerk/" ]
omit = [
  "object_clerk/tests/*",
  "object_clerk/*/tests/*",
  "object_clerk/*/*/tests/*",
]

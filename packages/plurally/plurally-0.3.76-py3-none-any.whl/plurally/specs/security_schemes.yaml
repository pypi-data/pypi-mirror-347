plurally_google:
  type: oauth2
  flows:
    authorizationCode:
      authorizationUrl: https://accounts.google.com/o/oauth2/auth
      authorizationUrlPayload:
        client_id: "{{ GOOGLE_CLIENT_ID }}"
        scope: "{{ ' '.join(scopes) | urlquote }}"
        response_type: "code"
        access_type: "offline"
        prompt: "{{ 'consent select_account' | urlquote }}"
        state: "{{ state }}"
      tokenUrl: https://accounts.google.com/o/oauth2/token
      tokenUrlPayload:
        code: "{{ code }}"
        client_id: "{{ GOOGLE_CLIENT_ID }}"
        client_secret: "{{ GOOGLE_CLIENT_SECRET }}"
        redirect_uri: "{{ redirect_url }}"
        grant_type: "authorization_code"
      auth_config:
        auth_type: "oauth2"
        token_refresh_endpoint: https://accounts.google.com/o/oauth2/token
        refresh_token: "{{ refresh_token }}"
        client_id: "{{ GOOGLE_CLIENT_ID }}"
        client_secret: "{{ GOOGLE_CLIENT_SECRET }}"
        grant_type: "refresh_token"
plurally_dynamics365:
  type: oauth2
  flows:
    authorizationCode:
      authorizationUrl: "https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize"
      authorizationUrlPayload:
        client_id: "{{ DYNAMICS365_CLIENT_ID }}"
        # add offline_access to the scopes to get a refresh token
        scope: "{{ ' '.join(scopes + ['offline_access']) }}"
        response_type: "code"
        response_mode: "query"
        redirect_uri: "{{ redirect_url }}"
        state: "{{ state }}"
        code_challenge: "{{ code_challenge }}"
        code_challenge_method: "S256"
      tokenUrl: https://login.microsoftonline.com/common/oauth2/v2.0/token
      tokenUrlPayload:
        code: "{{ code }}"
        client_id: "{{ DYNAMICS365_CLIENT_ID }}"
        client_secret: "{{ DYNAMICS365_CLIENT_SECRET }}"
        redirect_uri: "{{ redirect_url }}"
        grant_type: "authorization_code"
        scope: "{{ ' '.join(scopes) }}"
        code_verifier: "{{ code_verifier }}"
      auth_config:
        auth_type: "oauth2"
        token_refresh_endpoint: https://login.microsoftonline.com/common/oauth2/v2.0/token
        refresh_token: "{{ refresh_token }}"
        client_id: "{{ DYNAMICS365_CLIENT_ID }}"
        client_secret: "{{ DYNAMICS365_CLIENT_SECRET }}"
        grant_type: "refresh_token"

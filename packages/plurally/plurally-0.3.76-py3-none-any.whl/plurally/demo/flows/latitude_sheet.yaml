container_id: null
date_created: '2025-03-26T17:28:40.380696'
desc: ''
env_vars: {PLURALLY_CASE_NAME: Salon1}
flow_json:
  _inter_subflow_run_links: {}
  directed: true
  graph: {}
  id: fl-2be38c62-d35b-42e1-b2ea-9ea3a0943de8
  links:
  - {key: text###new, label: Text -> New, source: nd-07016913-e68d-468f-add9-23f7dcef8167,
    src_handle: text, target: nd-ea5c7a09-e0ac-4d7c-8f0d-a3def2995f5f, tgt_handle: new}
  - {key: formatted_text###category, label: Formatted Text -> category, source: nd-1d647d24-9058-410e-8dca-43b107f481b6,
    src_handle: formatted_text, target: nd-6433b203-df67-4122-87d8-584085d4b6e9, tgt_handle: category}
  - {key: formatted_text###category, label: Formatted Text -> category, source: nd-1d647d24-9058-410e-8dca-43b107f481b6,
    src_handle: formatted_text, target: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, tgt_handle: category}
  - {key: category###category, label: category -> category, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: category, target: nd-1d647d24-9058-410e-8dca-43b107f481b6, tgt_handle: category}
  - {key: lead_rating###some_val, label: lead_rating -> some_val, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: lead_rating, target: nd-7db1a800-e595-4cbd-9b64-db290b904229, tgt_handle: some_val}
  - {key: annual_revenue###annual_revenue, label: annual revenue -> Annual revenue,
    source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5, src_handle: annual_revenue, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034,
    tgt_handle: annual_revenue}
  - {key: category###category, label: category -> Category, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: category, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: category}
  - {key: company_name###company_name, label: company name -> Company name, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: company_name, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: company_name}
  - {key: company_website###company_website, label: company website -> Company website,
    source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5, src_handle: company_website,
    target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: company_website}
  - {key: country_code###country_code, label: country code -> Country code, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: country_code, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: country_code}
  - {key: date_met###date_met, label: date met -> Date met, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: date_met, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: date_met}
  - {key: email###email, label: email -> Email, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: email, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: email}
  - {key: first_name###first_name, label: first name -> First name, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: first_name, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: first_name}
  - {key: funding_round###funding_round, label: funding round -> Funding round, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: funding_round, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: funding_round}
  - {key: last_name###last_name, label: last name -> Last name, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: last_name, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: last_name}
  - {key: lead_rating###lead_rating, label: lead_rating -> Lead rating, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: lead_rating, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: lead_rating}
  - {key: number_of_employees###number_of_employees, label: number of employees ->
      Number of employees, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5, src_handle: number_of_employees,
    target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: number_of_employees}
  - {key: phone###phone, label: phone -> Phone, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: phone, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: phone}
  - {key: role###role, label: role -> Role, source: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5,
    src_handle: role, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: role}
  - {key: transcript###transcript, label: Transcript -> transcript, source: nd-33960e2b-17ad-42e3-bc04-bde1fcbb883f,
    src_handle: transcript, target: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83, tgt_handle: transcript}
  - {key: formatted_text###previous_content, label: Formatted Text -> Previous Content,
    source: nd-515da4d1-78f9-4373-b638-d03f61c8012e, src_handle: formatted_text, target: nd-bc3403cc-b085-43b5-9d8d-f379e129fd3f,
    tgt_handle: previous_content}
  - {key: formatted_text###text, label: Formatted Text -> Text, source: nd-515da4d1-78f9-4373-b638-d03f61c8012e,
    src_handle: formatted_text, target: nd-ea5c7a09-e0ac-4d7c-8f0d-a3def2995f5f, tgt_handle: text}
  - {key: formatted_text###old, label: Formatted Text -> Old, source: nd-6433b203-df67-4122-87d8-584085d4b6e9,
    src_handle: formatted_text, target: nd-ea5c7a09-e0ac-4d7c-8f0d-a3def2995f5f, tgt_handle: old}
  - {key: note###audio, label: Note -> Audio, source: nd-6dd8d9c6-4129-49ea-9826-78eafeee3aac,
    src_handle: note, target: nd-33960e2b-17ad-42e3-bc04-bde1fcbb883f, tgt_handle: audio}
  - {key: business__card_/__badge###image, label: Business card / badge -> image,
    source: nd-6dd8d9c6-4129-49ea-9826-78eafeee3aac, src_handle: business__card_/__badge,
    target: nd-7e147378-9353-4872-a8f1-41544d4453b4, tgt_handle: image}
  - {key: formatted_text###new, label: Formatted Text -> New, source: nd-7db1a800-e595-4cbd-9b64-db290b904229,
    src_handle: formatted_text, target: nd-07016913-e68d-468f-add9-23f7dcef8167, tgt_handle: new}
  - {key: profile_information###lead_details, label: profile information -> lead_details,
    source: nd-7e147378-9353-4872-a8f1-41544d4453b4, src_handle: profile_information,
    target: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5, tgt_handle: lead_details}
  - {key: profile_information###lead_details, label: profile information -> lead_details,
    source: nd-7e147378-9353-4872-a8f1-41544d4453b4, src_handle: profile_information,
    target: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, tgt_handle: lead_details}
  - {key: profile_information###profile_information, label: profile information ->
      profile_information, source: nd-7e147378-9353-4872-a8f1-41544d4453b4, src_handle: profile_information,
    target: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83, tgt_handle: profile_information}
  - {key: value###old, label: Value -> Old, source: nd-90c880d5-331a-49c5-9af8-4d25b524f28e,
    src_handle: value, target: nd-07016913-e68d-468f-add9-23f7dcef8167, tgt_handle: old}
  - {key: filled_template###text, label: filled_template -> Text, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: filled_template, target: nd-07016913-e68d-468f-add9-23f7dcef8167,
    tgt_handle: text}
  - {key: filled_template###input, label: filled_template -> input, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: filled_template, target: nd-cad93a04-37fc-41dc-8810-efce6c49ac91,
    tgt_handle: input}
  - {key: data###content, label: Data -> Content, source: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034,
    src_handle: data, target: nd-743a4f95-1742-44dc-8bf1-65ba9b4c7c3e, tgt_handle: content}
  - {key: data###values, label: Data -> Values, source: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034,
    src_handle: data, target: nd-b0101c0d-7bcb-47f7-8b14-baaa88795e63, tgt_handle: values}
  - {key: values###table, label: Values -> Table, source: nd-af746e4e-a1ed-4f1b-9742-05ee439db3d1,
    src_handle: values, target: nd-d28f10ef-f405-4891-bc5c-e04d038d68d7, tgt_handle: table}
  - {key: icon###icon, label: Icon -> Icon, source: nd-b0101c0d-7bcb-47f7-8b14-baaa88795e63,
    src_handle: icon, target: nd-743a4f95-1742-44dc-8bf1-65ba9b4c7c3e, tgt_handle: icon}
  - {key: url###url, label: Url -> Url, source: nd-b0101c0d-7bcb-47f7-8b14-baaa88795e63,
    src_handle: url, target: nd-743a4f95-1742-44dc-8bf1-65ba9b4c7c3e, tgt_handle: url}
  - {key: filled_template###filled_template, label: Filled Template -> filled_template,
    source: nd-c094311b-3619-44b6-807a-f97a20c9adef, src_handle: filled_template,
    target: nd-515da4d1-78f9-4373-b638-d03f61c8012e, tgt_handle: filled_template}
  - {key: plain_text###summary, label: plain_text -> Summary, source: nd-cad93a04-37fc-41dc-8810-efce6c49ac91,
    src_handle: plain_text, target: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034, tgt_handle: summary}
  - {key: formatted_text###lexique, label: Formatted Text -> lexique, source: nd-d28f10ef-f405-4891-bc5c-e04d038d68d7,
    src_handle: formatted_text, target: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83, tgt_handle: lexique}
  - {key: transcript###transcript, label: transcript -> transcript, source: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83,
    src_handle: transcript, target: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5, tgt_handle: transcript}
  - {key: transcript###transcript, label: transcript -> transcript, source: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83,
    src_handle: transcript, target: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, tgt_handle: transcript}
  - {key: text###content, label: Text -> Content, source: nd-ea5c7a09-e0ac-4d7c-8f0d-a3def2995f5f,
    src_handle: text, target: nd-bc3403cc-b085-43b5-9d8d-f379e129fd3f, tgt_handle: content}
  multigraph: true
  name: ''
  nodes:
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-07016913-e68d-468f-add9-23f7dcef8167
      count: -1
      is_output_fixable: false
      is_trigger: false
      kls: ReplaceText
      name: ReplaceText
      pos_x: 968.75
      pos_y: 860.0
      src_handles: [text]
      tgt_handles: [new, text, run, old]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-1d647d24-9058-410e-8dca-43b107f481b6
      input_schema:
        additionalProperties: false
        properties:
          category:
            anyOf:
            - {}
            - {type: 'null'}
            default: null
            title: category
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
        title: InputSchema
        type: object
      is_output_fixable: false
      is_trigger: false
      kls: FormatJinja
      name: Category
      pos_x: 340.0
      pos_y: 500.0
      src_handles: [formatted_text]
      template: |
        {%- if category == 'PROSPECT' or category == 'LAUNCHER' or category == 'PARTNER' -%}
        {{category}}
        {%- else -%}
        PROSPECT
        {%- endif -%}
      tgt_handles: [run, category]
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-23d4bc57-ceb3-4c62-9549-3d8d24943ed5
      add_chain_of_thought: false
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: lead_details, handle_id: c992, type: Auto}
      - {free: transcript, handle_id: '0197', type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          lead_details:
            handle_id: c992
            properties: {}
            title: lead_details
            type: object
            type-friendly: Auto (BETA)
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          transcript:
            handle_id: '0197'
            properties: {}
            title: transcript
            type: object
            type-friendly: Auto (BETA)
        required: [lead_details, transcript]
        title: InputSchema
        type: object
      instruct: |
        You are given a description of an interaction with a person and his / her details.

        <goal>
            Create a lead record using the provided information <transcript> and <lead_details>.
        </goal>

        <rules>
            <rule>The `lead_rating` (PICKLIST) should be **exactly** one of those value: `cold`, `medium` or `warm`. If unsure, you should return `medium`.</rule>
            <rule>The `category` (PICKLIST) should be **exactly** one of those value: `PROSPECT`, `PARTNER` or `LAUNCHER`. If unsure, you should return `PROSPECT`.</rule>
            <rule>Normalize urls (remove https:// and www if applicable).</rule>
            <rule>In the country code field, use the country code (e.g. FR).</rule>
            <rule>Output date format is DD/MM/YYYY.</rule>
            <rule>Only use the given context, leave any field not specified empty (i.e. empty string).</rule>
        </rule>

        {PLURALLY_EXAMPLES}
        {PLURALLY_GENERAL_INFO}

        <transcript>
        {{transcript}}
        </transcript>

        <lead_details>
        {{lead_details}}
        </lead_details>
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o
      name: Creating Lead Sheet
      output_fields:
      - {free: first name, handle_id: da8c, type: Text}
      - {free: last name, handle_id: cba0, type: Text}
      - {free: role, handle_id: 98d8, type: Text}
      - {free: category, handle_id: '1914', type: Text}
      - {free: email, handle_id: '1948', type: Text}
      - {free: phone, handle_id: bdc5, type: Text}
      - {free: company name, handle_id: '2770', type: Text}
      - {free: company website, handle_id: 0d6a, type: Text}
      - {free: number of employees, handle_id: f115, type: Text}
      - {free: annual revenue, handle_id: ca09, type: Text}
      - {free: date met, handle_id: 1b8d, type: Text}
      - {free: country code, handle_id: b11f, type: Text}
      - {free: funding round, handle_id: 1d52, type: Text}
      - {free: lead_rating, handle_id: 737b, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          annual_revenue: {handle_id: ca09, title: annual revenue, type: string}
          category: {handle_id: '1914', title: category, type: string}
          company_name: {handle_id: '2770', title: company name, type: string}
          company_website: {handle_id: 0d6a, title: company website, type: string}
          country_code: {handle_id: b11f, title: country code, type: string}
          date_met: {handle_id: 1b8d, title: date met, type: string}
          email: {handle_id: '1948', title: email, type: string}
          first_name: {handle_id: da8c, title: first name, type: string}
          funding_round: {handle_id: 1d52, title: funding round, type: string}
          last_name: {handle_id: cba0, title: last name, type: string}
          lead_rating: {handle_id: 737b, title: lead_rating, type: string}
          number_of_employees: {handle_id: f115, title: number of employees, type: string}
          phone: {handle_id: bdc5, title: phone, type: string}
          role: {handle_id: 98d8, title: role, type: string}
        required: [first_name, last_name, role, category, email, phone, company_name,
          company_website, number_of_employees, annual_revenue, date_met, country_code,
          funding_round, lead_rating]
        title: OutputSchema
        type: object
      pos_x: 530.25
      pos_y: 458.0
      src_handles: [country_code, number_of_employees, company_website, category,
        date_met, role, annual_revenue, lead_rating, first_name, last_name, funding_round,
        company_name, phone, email]
      tgt_handles: [transcript, run, lead_details]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-33960e2b-17ad-42e3-bc04-bde1fcbb883f
      is_output_fixable: false
      is_trigger: false
      kls: Transcript
      language: ''
      model: whisper-v3-turbo
      name: Transcription
      pos_x: 0.0
      pos_y: 190.0
      src_handles: [transcript]
      tgt_handles: [run, audio]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-515da4d1-78f9-4373-b638-d03f61c8012e
      input_schema:
        additionalProperties: false
        properties:
          filled_template:
            anyOf:
            - {}
            - {type: 'null'}
            default: null
            title: filled_template
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
        title: InputSchema
        type: object
      is_output_fixable: false
      is_trigger: false
      kls: FormatJinja
      name: FormatJinja
      pos_x: 1200.0
      pos_y: 900.0
      src_handles: [formatted_text]
      template: |-
        {%- if filled_template %}
        {{filled_template.content.content}}
        {%- else %}
        # 1. Prospects
        !!TOKEN PROSPECT!!
        # 2. Partners
        !!TOKEN PARTNER!!
        # 3. Launchers
        !!TOKEN LAUNCHER!!
        {%- endif %}
      tgt_handles: [filled_template, run]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-6433b203-df67-4122-87d8-584085d4b6e9
      input_schema:
        additionalProperties: false
        properties:
          category:
            anyOf:
            - {}
            - {type: 'null'}
            default: null
            title: category
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
        title: InputSchema
        type: object
      is_output_fixable: false
      is_trigger: false
      kls: FormatJinja
      name: FormatJinja
      pos_x: 800.0
      pos_y: 900.0
      src_handles: [formatted_text]
      template: '!!TOKEN {{category}}!!'
      tgt_handles: [run, category]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-6dd8d9c6-4129-49ea-9826-78eafeee3aac
      button_color: '#007bff'
      button_on_same_row: false
      button_text: Submit
      form:
      - col_span: 12
        is_only_first_run: false
        is_required: false
        name: Business Card / Badge
        options: []
        placeholder: ''
        type: image
      - col_span: 12
        is_only_first_run: false
        is_required: false
        name: Note
        options: []
        placeholder: ''
        type: audio record
      is_output_fixable: false
      is_trigger: true
      kls: Form
      name: Form
      output_schema:
        $defs:
          ImageFile:
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the image file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: image/*
                default: ''
                is-file: true
                title: upload_image_file_title
                type: string
                uiSchema: {ui:widget: file}
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the image file
                title: Filename
                uiSchema: {ui:widget: hidden}
            title: ImageFile
            type: object
            type-friendly: Image
            uiSchema:
              ui:options: {label: false}
          MicAudioFile:
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the audio file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: audio/*
                is-file: true
                minLength: 1
                title: record_audio_title
                type: string
                uiExampleSchema: {ui:widget: file}
                uiSchema:
                  errorMessages: {minLength: Please finish recording some audio first}
                  ui:widget: AudioRecorderWidget
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the audio file
                title: Filename
                uiSchema: {ui:widget: hidden}
            required: [file]
            title: MicAudioFile
            type: object
            type-friendly: Audio
            uiSchema:
              ui:options: {label: false}
        properties:
          business__card_/__badge:
            default: {content: '', file: '', filename: ''}
            file_label_override: Business Card / Badge
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the image file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: image/*
                default: ''
                is-file: true
                title: upload_image_file_title
                type: string
                uiSchema: {ui:widget: file}
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the image file
                title: Filename
                uiSchema: {ui:widget: hidden}
            title: Business card / badge
            type: object
            type-friendly: Image
            uiSchema: {ui:label: true, ui:placeholder: ''}
          note:
            default: null
            file_label_override: Note
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the audio file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: audio/*
                is-file: true
                minLength: 1
                title: record_audio_title
                type: string
                uiExampleSchema: {ui:widget: file}
                uiSchema:
                  errorMessages: {minLength: Please finish recording some audio first}
                  ui:widget: AudioRecorderWidget
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the audio file
                title: Filename
                uiSchema: {ui:widget: hidden}
            required: [file]
            title: Note
            type: object
            type-friendly: Record Audio
            uiSchema: {ui:label: true, ui:placeholder: ''}
        title: Form
        type: object
        uiSchema:
          ui:grid:
          - [business__card_/__badge, 12]
          - [note, 12]
      pos_x: 113.0
      pos_y: 0.0
      show_label: true
      src_handles: [note, business__card_/__badge]
      tgt_handles: []
      use_case: true
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-743a4f95-1742-44dc-8bf1-65ba9b4c7c3e
      is_correctible: false
      is_hidden: false
      is_output_fixable: false
      is_trigger: false
      key: TableOutput
      kls: TableOutput
      name: TableOutput
      pos_x: 268.75
      pos_y: 1151.0
      src_handles: []
      tgt_handles: [content, run, url, icon]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-7db1a800-e595-4cbd-9b64-db290b904229
      input_schema:
        additionalProperties: false
        properties:
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          some_val:
            anyOf:
            - {}
            - {type: 'null'}
            default: null
            title: some_val
          value:
            anyOf:
            - {}
            - {type: 'null'}
            default: null
            title: value
        title: InputSchema
        type: object
      is_output_fixable: false
      is_trigger: false
      kls: FormatJinja
      name: FormatJinja
      pos_x: 860.0
      pos_y: 740.0
      src_handles: [formatted_text]
      template: |-
        {%- set value = some_val -%}
        {%- if value == 'warm' -%}
        https://tryplurally.com/latitude/icons/high.png
        {%- elif value == 'medium' -%}
        https://tryplurally.com/latitude/icons/neutral.png
        {%- else -%}
        https://tryplurally.com/latitude/icons/low.png
        {%- endif -%}
      tgt_handles: [run, value, some_val]
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-7e147378-9353-4872-a8f1-41544d4453b4
      add_chain_of_thought: false
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: image, handle_id: 17b0, type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          image:
            handle_id: 17b0
            properties: {}
            title: image
            type: object
            type-friendly: Auto (BETA)
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
        required: [image]
        title: InputSchema
        type: object
      instruct: |-
        Extract the profile information from the image.

        When appropriate, normalize website url:
        - no https:// 
        - no www
        - no trailing /

        Extract the following information and output to JSON string.

        "first_name"
        "last_name"
        "role"
        "email"
        "phone_number"
        "company_name"
        "company_website"

        If no image is provided, return an empty mapping.
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o
      name: Extract info from image
      output_fields:
      - {free: profile information, handle_id: 6d85, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          profile_information: {handle_id: 6d85, title: profile information, type: string}
        required: [profile_information]
        title: OutputSchema
        type: object
      pos_x: 217.75
      pos_y: 190.0
      src_handles: [profile_information]
      tgt_handles: [run, image]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-90c880d5-331a-49c5-9af8-4d25b524f28e
      is_output_fixable: false
      is_trigger: false
      kls: Text
      name: Text
      pos_x: 1080.0
      pos_y: 680.0
      src_handles: [value]
      tgt_handles: [run]
      value: '!!ICON TOKEN!!'
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113
      add_chain_of_thought: false
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: lead_details, handle_id: e132, type: Auto}
      - {free: transcript, handle_id: e684, type: Auto}
      - {free: category, handle_id: 9dca, type: Text}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          category: {handle_id: 9dca, title: category, type: string}
          lead_details:
            handle_id: e132
            properties: {}
            title: lead_details
            type: object
            type-friendly: Auto (BETA)
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          transcript:
            handle_id: e684
            properties: {}
            title: transcript
            type: object
            type-friendly: Auto (BETA)
        required: [lead_details, transcript, category]
        title: InputSchema
        type: object
      instruct: |
        You are given a description of an interaction with a person and his / her details.

        ----------

        General Instructions  
        - Always up-to-date with the latest data-handling best practices.  
        - Respond in the **same language as the input language**.  
        - Use only the provided context—do not make assumptions or generate fictional information.

        ----------

        General Informations  
        {PLURALLY_GENERAL_INFO}

        ----------

        Task Objective  
        Given:  
        - A **Summary** of an interaction.
        - The **Lead Details** of the person involved.
        - A **Template** to adhere to report on that interaction. 

        Your goal is to:  
        - Step 1: Fill the **Template** with the information contained in the **Summary** and **Lead Details**. 
        - Step 2: Furthermore, you should extract the **Lead Rating**.

        ----------

        Rules
        <rules>
        <rule>
         **Placeholders**
         Placeholders that you are meant to fill are given as surrounded by double square brackets, e.g. `[[placeholder]]`.
         If you see triple square brackets, it means a placeholder inside square brackets, e.g. `[[[email]]]([[email]])`. If `email=name@domain.fr` then the output should be `[name@domain.fr](name@domain.fr)`.
        </rule>
        <rule>
        **Special tokens**
        Special tokens are surrounded by `!!`, for example `!!ICON TOKEN!!`. Make sure to keep **all special tokens** unchanged in your output.
        </rule>
        <rule>
         **Keep All Information**
         Make sure to keep all of the information details that are in the **Summary**.
        </rule>
        <rule>
        **Ordering**
        Order the information in a way that makes the output clear and structured.
        </rule>
        <rule>
        **Removal Of Empty Placeholders**
        - If some **placeholders are irrelevant** then remove them.
        - **Always keep all of the headers and titles**..
        </rule>
        <rule>
        **Interpolate dates**
        If the **Summary** includes dates (e.g. "next tuesday"), replace with the actual date in the specified **Date Format**.
        </rule>
        </rules>

        ----------

        Inputs
        <input id="Summary">
        {{transcript}}
        </input>

        <input id="Lead Details">
        {{lead_details}}
        </input>

        <input id="Template">
        ### [[COMPANY ALL CAPS]]

        ![[[Lead rating]]](!!ICON TOKEN!!)

        **Contact:**
        * [[full name]] \+ [[title]]
        * [[[email]]]([[email]]) / [[phone number]]

        **Discussion:**
        * [[item 1]]
        * [[item 2]]

        **Call to action:**
        * [[call to action 1]]
        * [[call to action 2]]
        ---
        !!TOKEN {{category}}!!
        </input>

        Output Expectations
        - Adhere to the provided **Template** and language requirement strictly.
        - Adhere to the structure of new lines in the **Template**.
        - You are allowed to add or remove list items from the template.
        - **Date format** is DD/MM/YYYY.
        - Numbers should be given as numbers, e.g. "1 000 000" rather than "one million".
        - Make sure to keep **all special tokens** in your output (surrounded by `!!`).
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o
      name: Creating lead
      output_fields:
      - {free: filled_template, handle_id: d084, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          filled_template: {handle_id: d084, title: filled_template, type: string}
        required: [filled_template]
        title: OutputSchema
        type: object
      pos_x: 100.0
      pos_y: 560.0
      src_handles: [filled_template]
      tgt_handles: [transcript, run, lead_details, category]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-a11c7f27-3f5e-478e-8199-5ba6dcfe6034
      columns:
      - {free: First name, handle_id: ef3d, type: Auto}
      - {free: Last name, handle_id: 12d1, type: Auto}
      - {free: Role, handle_id: 4f04, type: Auto}
      - {free: Category, handle_id: 504d, type: Auto}
      - {free: Email, handle_id: 39ad, type: Auto}
      - {free: Phone, handle_id: 46ba, type: Auto}
      - {free: Date met, handle_id: '2e10', type: Auto}
      - {free: Number of employees, handle_id: 8f28, type: Auto}
      - {free: Annual revenue, handle_id: bda7, type: Auto}
      - {free: Funding round, handle_id: 7d59, type: Auto}
      - {free: Company name, handle_id: 9a47, type: Auto}
      - {free: Company website, handle_id: 3b56, type: Auto}
      - {free: Summary, handle_id: 928b, type: Auto}
      - {free: Country code, handle_id: 4ece, type: Auto}
      - {free: Lead rating, handle_id: '1127', type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          annual_revenue:
            handle_id: bda7
            properties: {}
            title: Annual revenue
            type: object
          category:
            handle_id: 504d
            properties: {}
            title: Category
            type: object
          company_name:
            handle_id: 9a47
            properties: {}
            title: Company name
            type: object
          company_website:
            handle_id: 3b56
            properties: {}
            title: Company website
            type: object
          country_code:
            handle_id: 4ece
            properties: {}
            title: Country code
            type: object
          date_met:
            handle_id: '2e10'
            properties: {}
            title: Date met
            type: object
          email:
            handle_id: 39ad
            properties: {}
            title: Email
            type: object
          first_name:
            handle_id: ef3d
            properties: {}
            title: First name
            type: object
          funding_round:
            handle_id: 7d59
            properties: {}
            title: Funding round
            type: object
          last_name:
            handle_id: 12d1
            properties: {}
            title: Last name
            type: object
          lead_rating:
            handle_id: '1127'
            properties: {}
            title: Lead rating
            type: object
          number_of_employees:
            handle_id: 8f28
            properties: {}
            title: Number of employees
            type: object
          phone:
            handle_id: 46ba
            properties: {}
            title: Phone
            type: object
          role:
            handle_id: 4f04
            properties: {}
            title: Role
            type: object
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          summary:
            handle_id: 928b
            properties: {}
            title: Summary
            type: object
        required: [first_name, last_name, role, category, email, phone, date_met,
          number_of_employees, annual_revenue, funding_round, company_name, company_website,
          summary, country_code, lead_rating]
        title: InputSchema
        type: object
      is_output_fixable: false
      is_trigger: false
      kls: ToTable
      name: Add entry
      pos_x: 18.75
      pos_y: 860.0
      src_handles: [data]
      tgt_handles: [run, first_name, last_name, role, category, email, phone, date_met,
        number_of_employees, annual_revenue, funding_round, company_name, company_website,
        summary, country_code, lead_rating]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-af746e4e-a1ed-4f1b-9742-05ee439db3d1
      is_output_fixable: false
      is_trigger: false
      kls: SheetsRead
      name: Lexique
      pos_x: 529.75
      pos_y: 16.5
      range_name: Lexique!A4:A
      sheet_id: 13m1l2NSfG8pwEGGMATwuClHu8gFgutAhfwTPH0mJsZM
      src_handles: [values]
      tgt_handles: [run]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-b0101c0d-7bcb-47f7-8b14-baaa88795e63
      append: true
      is_output_fixable: false
      is_trigger: false
      kls: SheetsWrite
      name: Write Sheets
      pos_x: 407.75
      pos_y: 994.0
      range_name: Leads!A4
      sheet_id: 1NIuxs7yRYGCH_8HEwziCymzdBcNYA7ZP8Esr8104H6o
      src_handles: [url, icon]
      tgt_handles: [run, values]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-bc3403cc-b085-43b5-9d8d-f379e129fd3f
      is_correctible: true
      is_hidden: false
      is_output_fixable: false
      is_trigger: false
      key: filled_template
      kls: MarkdownOutput
      name: MarkdownOutput
      pos_x: 1199.75
      pos_y: 1151.0
      src_handles: []
      tgt_handles: [content, previous_content, run]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-c094311b-3619-44b6-807a-f97a20c9adef
      is_output_fixable: false
      is_trigger: false
      keys: [filled_template]
      kls: StateInput
      name: StateInput
      output_schema:
        properties:
          filled_template:
            anyOf:
            - {}
            - {type: 'null'}
            default: null
            title: Filled Template
        title: OutputSchema
        type: object
        uiSchema:
          ui:options: {label: false}
      pos_x: 1270.25
      pos_y: 726.0
      src_handles: [filled_template]
      tgt_handles: [run]
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-cad93a04-37fc-41dc-8810-efce6c49ac91
      add_chain_of_thought: false
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: input, handle_id: af34, type: Text}
      input_schema:
        additionalProperties: false
        can-add-fields: true
        properties:
          input: {handle_id: af34, title: input, type: string}
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
        required: [input]
        title: InputSchema
        type: object
      instruct: |
        You are Plurally's AI-powered assistant.
        You are helping a company remove markdown and special custom tokens from text.

        --------

        General informations
        {PLURALLY_GENERAL_INFO}

        --------

        Task Objective
        Given a markdown **Input** text, remove all markdown and all tokens surrounded by `!!` and return the same content in plain text.

        --------

        Rules
        <rule>
        Do not add any content that is not present in **Input**.
        </rule>
        <rule>
        Do not remove any content that is not markdown or special token surrounded by `!!`. 
        </rule>

        <example id="1">
        ```markdown
        ## Header 1
        some content
        !!TOKEN PROSPECT!!
        ```
        Expected output:
        ```plaintext
        Header 1
        some content
        ```
        </example>

        <input id="Input">
        {{input}}
        </input>
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o-mini
      name: Remove Markdown
      output_fields:
      - {free: plain_text, handle_id: b694, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          plain_text: {handle_id: b694, title: plain_text, type: string}
        required: [plain_text]
        title: OutputSchema
        type: object
      pos_x: 420.0
      pos_y: 720.0
      src_handles: [plain_text]
      tgt_handles: [run, input]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-d28f10ef-f405-4891-bc5c-e04d038d68d7
      is_output_fixable: false
      is_trigger: false
      kls: FormatTable
      name: Lexique
      pos_x: 514.25
      pos_y: 190.0
      prefix: ''
      separator: |2+

      src_handles: [formatted_text]
      suffix: ''
      template: '- "{term}"'
      tgt_handles: [run, table]
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83
      add_chain_of_thought: false
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: profile_information, handle_id: 0c84, type: Auto}
      - {free: transcript, handle_id: bcc8, type: Auto}
      - {free: lexique, handle_id: c879, type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          lexique:
            handle_id: c879
            properties: {}
            title: lexique
            type: object
            type-friendly: Auto (BETA)
          profile_information:
            handle_id: 0c84
            properties: {}
            title: profile_information
            type: object
            type-friendly: Auto (BETA)
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          transcript:
            handle_id: bcc8
            properties: {}
            title: transcript
            type: object
            type-friendly: Auto (BETA)
        required: [profile_information, transcript, lexique]
        title: InputSchema
        type: object
      instruct: |
        <task>
            You are a language model specializing in correcting transcripts.

            <goal>
                Identify and correct errors in the transcript, including contextually incoherent words and misspelled names.
            </goal>

            <rules>
                <rule>Use <profile_information> to correct name spelling errors when available.</rule>
                <rule>Refer to <vocabulary> to fix misspelled technical terms and acronyms  (always use the full vocabulary reference if replacing).</rule>
                <rule>Correct names if they are phonetically similar to the reference name, but do not modify them if they are visually distinct.</rule>
                <rule>Apply corrections to any noticeable transcription errors based on global context.</rule>
                <rule>Preserve all other parts of the transcript without modification.</rule>
            </rules>

            {PLURALLY_EXAMPLES}
            {PLURALLY_GENERAL_INFO}

            <transcript>
                {{transcript}}
            </transcript>

            <profile_information>
                {{profile_information}}
            </profile_information>

            <vocabulary>
                {{lexique}}
            </vocabulary>
        </task>
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o
      name: Transcription
      output_fields:
      - {free: transcript, handle_id: 21a7, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          transcript: {handle_id: 21a7, title: transcript, type: string}
        required: [transcript]
        title: OutputSchema
        type: object
      pos_x: 117.0
      pos_y: 324.0
      src_handles: [transcript]
      tgt_handles: [run, lexique, transcript, profile_information]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-ea5c7a09-e0ac-4d7c-8f0d-a3def2995f5f
      count: -1
      is_output_fixable: false
      is_trigger: false
      kls: ReplaceText
      name: ReplaceText
      pos_x: 900.0
      pos_y: 1080.0
      src_handles: [text]
      tgt_handles: [new, text, run, old]
id: 2246d66d-9694-413d-9a43-b75100c86a8c
is_running: false
last_exec_dt: null
last_updated: '2025-04-16T12:51:16.470152'
logo: https://img.icons8.com/color/200/google-sheets.png
name: Plurally Expo (mdx)
org_id: 3d5ed0d8-8450-4372-b8d4-dfa70e97bad3
owner_id: 83e1fa8e-a5db-487f-9780-c69846b9f8ca

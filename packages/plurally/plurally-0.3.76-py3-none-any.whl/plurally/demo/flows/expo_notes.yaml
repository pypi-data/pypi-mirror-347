container_id: null
date_created: '2025-03-22T19:45:49.432672'
desc: ''
env_vars: {}
flow_json:
  _inter_subflow_run_links: {}
  directed: true
  graph: {}
  id: fl-d1f05fd9-87ad-44d7-b46d-e796e5fa6503
  links:
  - {key: labels_business_card_or_badge###image, label: Labels_business_card_or_badge
      -> image, source: nd-6dd8d9c6-4129-49ea-9826-78eafeee3aac, src_handle: labels_business_card_or_badge,
    target: nd-7e147378-9353-4872-a8f1-41544d4453b4, tgt_handle: image}
  - {key: labels_expo_notes###audio, label: Labels_expo_notes -> Audio, source: nd-6dd8d9c6-4129-49ea-9826-78eafeee3aac,
    src_handle: labels_expo_notes, target: nd-33960e2b-17ad-42e3-bc04-bde1fcbb883f,
    tgt_handle: audio}
  - {key: transcript###transcript, label: Transcript -> transcript, source: nd-33960e2b-17ad-42e3-bc04-bde1fcbb883f,
    src_handle: transcript, target: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83, tgt_handle: transcript}
  - {key: first_name###first_name, label: first name -> First name, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: first_name, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: first_name}
  - {key: last_name###last_name, label: last name -> Last name, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: last_name, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: last_name}
  - {key: role###role, label: role -> Role, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: role, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: role}
  - {key: email###email, label: email -> Email, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: email, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: email}
  - {key: phone###phone, label: phone -> Phone, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: phone, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: phone}
  - {key: company_name###company_name, label: company name -> Company name, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: company_name, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: company_name}
  - {key: company_website###company_website, label: company website -> Company website,
    source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, src_handle: company_website,
    target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: company_website}
  - {key: number_of_employees###number_of_employees, label: number of employees ->
      Number of employees, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, src_handle: number_of_employees,
    target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: number_of_employees}
  - {key: annual_revenue###annual_revenue, label: annual revenue -> Annual revenue,
    source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, src_handle: annual_revenue, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878,
    tgt_handle: annual_revenue}
  - {key: date_met###date_met, label: date met -> Date met, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: date_met, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: date_met}
  - {key: lead_status###lead_rating, label: lead_status -> Lead rating, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: lead_status, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: lead_rating}
  - {key: country_code###country, label: country code -> Country, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: country_code, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: country}
  - {key: funding_round###funding, label: funding round -> Funding, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: funding_round, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: funding}
  - {key: description###summary, label: description -> Summary, source: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113,
    src_handle: description, target: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878, tgt_handle: summary}
  - {key: profile_information###profile_information, label: profile information ->
      profile_information, source: nd-7e147378-9353-4872-a8f1-41544d4453b4, src_handle: profile_information,
    target: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83, tgt_handle: profile_information}
  - {key: profile_information###lead_details, label: profile information -> lead_details,
    source: nd-7e147378-9353-4872-a8f1-41544d4453b4, src_handle: profile_information,
    target: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, tgt_handle: lead_details}
  - {key: transcript###summary, label: transcript -> summary, source: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83,
    src_handle: transcript, target: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113, tgt_handle: summary}
  - {key: url###url, label: Url -> Url, source: nd-1f0268fc-d983-42cc-a260-35b3bfe4f6bd,
    src_handle: url, target: nd-2118d9e6-25aa-4a78-92fb-c1910b5072d7, tgt_handle: url}
  - {key: icon###icon, label: Icon -> Icon, source: nd-1f0268fc-d983-42cc-a260-35b3bfe4f6bd,
    src_handle: icon, target: nd-2118d9e6-25aa-4a78-92fb-c1910b5072d7, tgt_handle: icon}
  - {key: data###values, label: Data -> Values, source: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878,
    src_handle: data, target: nd-1f0268fc-d983-42cc-a260-35b3bfe4f6bd, tgt_handle: values}
  - {key: data###content, label: Data -> Content, source: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878,
    src_handle: data, target: nd-2118d9e6-25aa-4a78-92fb-c1910b5072d7, tgt_handle: content}
  multigraph: true
  name: ''
  nodes:
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-6dd8d9c6-4129-49ea-9826-78eafeee3aac
      button_color: '#007bff'
      button_on_same_row: false
      button_text: Submit
      form:
      - col_span: 12
        is_only_first_run: false
        is_required: false
        name: labels_business_card_or_badge
        options: []
        placeholder: ''
        type: image
      - col_span: 12
        is_only_first_run: false
        is_required: false
        name: labels_expo_notes
        options: []
        placeholder: ''
        type: audio record
      is_output_fixable: false
      is_trigger: true
      kls: Form
      name: Form
      output_schema:
        $defs:
          ImageFile:
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the image file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: image/*
                default: ''
                is-file: true
                title: upload_image_file_title
                type: string
                uiSchema: {ui:widget: file}
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the image file
                title: Filename
                uiSchema: {ui:widget: hidden}
            title: ImageFile
            type: object
            type-friendly: Image
            uiSchema:
              ui:options: {label: false}
          MicAudioFile:
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the audio file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: audio/*
                is-file: true
                minLength: 1
                title: record_audio_title
                type: string
                uiExampleSchema: {ui:widget: file}
                uiSchema:
                  errorMessages: {minLength: Please finish recording some audio first}
                  ui:widget: AudioRecorderWidget
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the audio file
                title: Filename
                uiSchema: {ui:widget: hidden}
            required: [file]
            title: MicAudioFile
            type: object
            type-friendly: Audio
            uiSchema:
              ui:options: {label: false}
        properties:
          labels_business_card_or_badge:
            default: {content: '', file: '', filename: ''}
            file_label_override: labels_business_card_or_badge
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the image file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: image/*
                default: ''
                is-file: true
                title: upload_image_file_title
                type: string
                uiSchema: {ui:widget: file}
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the image file
                title: Filename
                uiSchema: {ui:widget: hidden}
            title: Labels_business_card_or_badge
            type: object
            type-friendly: Image
            uiSchema: {ui:label: true, ui:placeholder: ''}
          labels_expo_notes:
            default: null
            file_label_override: labels_expo_notes
            properties:
              content:
                anyOf:
                - {format: binary, type: string}
                - {type: 'null'}
                default: null
                description: The content of the audio file
                title: Content
                uiSchema: {ui:widget: hidden}
              file:
                accept: audio/*
                is-file: true
                minLength: 1
                title: record_audio_title
                type: string
                uiExampleSchema: {ui:widget: file}
                uiSchema:
                  errorMessages: {minLength: Please finish recording some audio first}
                  ui:widget: AudioRecorderWidget
              filename:
                anyOf:
                - {type: string}
                - {type: 'null'}
                default: null
                description: The name of the audio file
                title: Filename
                uiSchema: {ui:widget: hidden}
            required: [file]
            title: Labels_expo_notes
            type: object
            type-friendly: Record Audio
            uiSchema: {ui:label: true, ui:placeholder: ''}
        title: Form
        type: object
        uiSchema:
          ui:grid:
          - [labels_business_card_or_badge, 12]
          - [labels_expo_notes, 12]
      pos_x: 360.25
      pos_y: 0.0
      show_label: true
      src_handles: [labels_business_card_or_badge, labels_expo_notes]
      tgt_handles: []
      use_case: false
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-33960e2b-17ad-42e3-bc04-bde1fcbb883f
      is_output_fixable: false
      is_trigger: false
      kls: Transcript
      language: ''
      name: Transcription
      pos_x: 479.5
      pos_y: 190.0
      src_handles: [transcript]
      tgt_handles: [audio, run]
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-9c1a2165-7b84-4a0e-8e94-4027d8ef2113
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: lead_details, handle_id: e132, type: Auto}
      - {free: summary, handle_id: e684, type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          lead_details:
            handle_id: e132
            properties: {}
            title: lead_details
            type: object
            type-friendly: Auto (BETA)
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          summary:
            handle_id: e684
            properties: {}
            title: summary
            type: object
            type-friendly: Auto (BETA)
        required: [lead_details, summary]
        title: InputSchema
        type: object
      instruct: |-
        # Plurally System Prompts

        ## Introduction  
        You are Plurally's AI-powered assistant.
        You are helping a company automate the creation of **lead records** using an interaction **Summary** and a **Lead Details**.

        ## General informations
        {PLURALLY_GENERAL_INFO}

        ## Task Objective  
        Given:  
        - A **Summary** of an interaction with a person
        - **Lead details** (may be empty or partially filled)
        - A **Description Template**

        Your goal is to **create a lead record** using the provided information, respecting the following **Rules**

        ## Rules

        1. **Picklist Fields**  
           - `lead_rating` must be one of: `n/a`, `cold`, `warm` (PICKLIST).

        2. **URL Normalization**  
           - Remove `https://` and `www.` from any URL if present.

        3. **Description Formatting**  
           - Use the provided **Description Template** to write a structured `description` of the interaction.
           - Remove personal pronouns referring to the person making the summary (e.g., "I met with Megan" -> "Met with Megan").
           - Ensure the content is well-organized and easy to read (use bullet points where appropriate) and has a professional tone.  
           - **Include all available details**.

        4. **Lead Creation**  
           - **Always create a lead record.**
           - You are allowed to infer the following fields: `lead_rating`.
           - For fields that you cannot fill, return an empty string. 

        ## Output Expectations
        - All dates must be in the format: **DD/MM/YYYY**.
        - All output must be in **English**, except for fields explicitly marked as PICKLIST.
        - Following fields should be a number without ponctuation:
           - `number of employees`
           - `annual revenue`

        ## Inputs
        ### Summary
        ```
        {{summary}}
        ```

        ### Lead Details
        ```
        {{lead_details}}
        ```

        ### Description Template
        ```
        Summary
        (summary content)

        (if next steps)  
        Next steps  
        (next steps content)  
        (end if)
        ```
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o
      name: Creating lead
      output_fields:
      - {free: first name, handle_id: 78ea, type: Text}
      - {free: last name, handle_id: 85df, type: Text}
      - {free: lead_status, handle_id: '5737', type: Text}
      - {free: role, handle_id: deef, type: Text}
      - {free: email, handle_id: fc99, type: Text}
      - {free: phone, handle_id: a904, type: Text}
      - {free: company name, handle_id: db82, type: Text}
      - {free: company website, handle_id: '1e30', type: Text}
      - {free: number of employees, handle_id: 0f03, type: Text}
      - {free: annual revenue, handle_id: a935, type: Text}
      - {free: date met, handle_id: 590a, type: Text}
      - {free: country code, handle_id: 100b, type: Text}
      - {free: funding round, handle_id: a97c, type: Text}
      - {free: description, handle_id: f057, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          annual_revenue: {handle_id: a935, title: annual revenue, type: string}
          company_name: {handle_id: db82, title: company name, type: string}
          company_website: {handle_id: '1e30', title: company website, type: string}
          country_code: {handle_id: 100b, title: country code, type: string}
          date_met: {handle_id: 590a, title: date met, type: string}
          description: {handle_id: f057, title: description, type: string}
          email: {handle_id: fc99, title: email, type: string}
          first_name: {handle_id: 78ea, title: first name, type: string}
          funding_round: {handle_id: a97c, title: funding round, type: string}
          last_name: {handle_id: 85df, title: last name, type: string}
          lead_status: {handle_id: '5737', title: lead_status, type: string}
          number_of_employees: {handle_id: 0f03, title: number of employees, type: string}
          phone: {handle_id: a904, title: phone, type: string}
          role: {handle_id: deef, title: role, type: string}
        required: [first_name, last_name, lead_status, role, email, phone, company_name,
          company_website, number_of_employees, annual_revenue, date_met, country_code,
          funding_round, description]
        title: OutputSchema
        type: object
      pos_x: 0.0
      pos_y: 458.0
      src_handles: [phone, company_name, description, company_website, funding_round,
        last_name, lead_status, date_met, role, annual_revenue, number_of_employees,
        email, first_name, country_code]
      tgt_handles: [run, lead_details, summary]
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-7e147378-9353-4872-a8f1-41544d4453b4
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: image, handle_id: 17b0, type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          image:
            handle_id: 17b0
            properties: {}
            title: image
            type: object
            type-friendly: Auto (BETA)
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
        required: [image]
        title: InputSchema
        type: object
      instruct: |-
        Extract the profile information from the image.

        When appropriate, normalize website url:
        - no https:// 
        - no www
        - no trailing /

        Extract the following information and output to JSON string.

        "first_name"
        "last_name"
        "role"
        "email"
        "phone_number"
        "company_name"
        "company_website"

        If no image is provided, return an empty mapping.
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o
      name: Extract info from image
      output_fields:
      - {free: profile information, handle_id: 6d85, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          profile_information: {handle_id: 6d85, title: profile information, type: string}
        required: [profile_information]
        title: OutputSchema
        type: object
      pos_x: 250.5
      pos_y: 190.0
      src_handles: [profile_information]
      tgt_handles: [run, image]
  - id:
      PLURALLY_VERSION: 1
      _node_id: nd-d79de16d-f8f9-4b53-beeb-df2c7ed45d83
      add_explanation: false
      examples: ''
      general_info: ''
      input_fields:
      - {free: profile_information, handle_id: 0c84, type: Auto}
      - {free: transcript, handle_id: bcc8, type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          profile_information:
            handle_id: 0c84
            properties: {}
            title: profile_information
            type: object
            type-friendly: Auto (BETA)
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          transcript:
            handle_id: bcc8
            properties: {}
            title: transcript
            type: object
            type-friendly: Auto (BETA)
        required: [profile_information, transcript]
        title: InputSchema
        type: object
      instruct: |
        <task>
         You are a language model specializing in correcting transcripts.

         <goal>
         Identify and correct errors in the transcript, including contextually incoherent words and misspelled names.
         </goal>

         <rules>
         <rule>Use <profile_information> to correct name spelling errors when available.</rule>
         <rule>Correct names if they are phonetically similar to the reference name, but do not modify them if they are visually distinct.</rule>
         <rule>Apply corrections to any noticeable transcription errors based on global context.</rule>
         <rule>Preserve all other parts of the transcript without modification.</rule>
         </rules>

         {PLURALLY_EXAMPLES}
         {PLURALLY_GENERAL_INFO}

         <transcript>
         {{transcript}}
         </transcript>

         <profile_information>
         {{profile_information}}
         </profile_information>
        </task>
      is_output_fixable: false
      is_table: false
      is_trigger: false
      kls: Instruct
      model: gpt-4o
      name: Transcription
      output_fields:
      - {free: transcript, handle_id: 21a7, type: Text}
      output_schema:
        can-add-fields: true
        properties:
          transcript: {handle_id: 21a7, title: transcript, type: string}
        required: [transcript]
        title: OutputSchema
        type: object
      pos_x: 479.5
      pos_y: 324.0
      src_handles: [transcript]
      tgt_handles: [transcript, run, profile_information]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-1f0268fc-d983-42cc-a260-35b3bfe4f6bd
      append: true
      is_output_fixable: false
      is_trigger: false
      kls: SheetsWrite
      name: Output
      pos_x: 263.0
      pos_y: 726.0
      range_name: Leads!A4
      sheet_id: 1IemeGZ8CQ5XQCxuEWK6a1LHXgySlvwAle2L3EAh_QPk
      src_handles: [icon, url]
      tgt_handles: [values, run]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-f477a6e0-9fdd-4d5c-9e84-86468c560878
      columns:
      - {free: First name, handle_id: a0b6, type: Auto}
      - {free: Last name, handle_id: cb49, type: Auto}
      - {free: Lead rating, handle_id: 784b, type: Auto}
      - {free: Role, handle_id: 0ea6, type: Auto}
      - {free: Email, handle_id: ce01, type: Auto}
      - {free: Phone, handle_id: e480, type: Auto}
      - {free: Company name, handle_id: b446, type: Auto}
      - {free: Company website, handle_id: '9e10', type: Auto}
      - {free: Number of employees, handle_id: b99b, type: Auto}
      - {free: Annual revenue, handle_id: c7b9, type: Auto}
      - {free: Date met, handle_id: '2082', type: Auto}
      - {free: Summary, handle_id: 1d59, type: Auto}
      - {free: Country, handle_id: 5bd4, type: Auto}
      - {free: Funding, handle_id: d005, type: Auto}
      input_schema:
        $defs:
          Auto:
            properties: {}
            title: Auto
            type: object
        additionalProperties: false
        can-add-fields: true
        properties:
          annual_revenue:
            handle_id: c7b9
            properties: {}
            title: Annual revenue
            type: object
          company_name:
            handle_id: b446
            properties: {}
            title: Company name
            type: object
          company_website:
            handle_id: '9e10'
            properties: {}
            title: Company website
            type: object
          country:
            handle_id: 5bd4
            properties: {}
            title: Country
            type: object
          date_met:
            handle_id: '2082'
            properties: {}
            title: Date met
            type: object
          email:
            handle_id: ce01
            properties: {}
            title: Email
            type: object
          first_name:
            handle_id: a0b6
            properties: {}
            title: First name
            type: object
          funding:
            handle_id: d005
            properties: {}
            title: Funding
            type: object
          last_name:
            handle_id: cb49
            properties: {}
            title: Last name
            type: object
          lead_rating:
            handle_id: 784b
            properties: {}
            title: Lead rating
            type: object
          number_of_employees:
            handle_id: b99b
            properties: {}
            title: Number of employees
            type: object
          phone:
            handle_id: e480
            properties: {}
            title: Phone
            type: object
          role:
            handle_id: 0ea6
            properties: {}
            title: Role
            type: object
          run:
            default: true
            description: Whether to run the block.
            examples: [true, false]
            title: Run
            type: boolean
          summary:
            handle_id: 1d59
            properties: {}
            title: Summary
            type: object
        required: [first_name, last_name, lead_rating, role, email, phone, company_name,
          company_website, number_of_employees, annual_revenue, date_met, summary,
          country, funding]
        title: InputSchema
        type: object
      is_output_fixable: false
      is_trigger: false
      kls: ToTable
      name: Add entry
      pos_x: 0.0
      pos_y: 592.0
      src_handles: [data]
      tgt_handles: [run, first_name, last_name, lead_rating, role, email, phone, company_name,
        company_website, number_of_employees, annual_revenue, date_met, summary, country,
        funding]
  - id:
      PLURALLY_VERSION: 0
      _node_id: nd-2118d9e6-25aa-4a78-92fb-c1910b5072d7
      is_correctible: true
      is_hidden: false
      is_output_fixable: false
      is_trigger: false
      key: Add entry
      kls: TableOutput
      name: Add entry
      pos_x: 250.0
      pos_y: 883.0
      src_handles: []
      tgt_handles: [content, icon, run, url]
id: 0da21f2d-1b42-4eea-b736-b0eb0bb3ced7
is_running: false
last_exec_dt: null
last_updated: '2025-04-02T06:17:07.829788'
logo: https://img.icons8.com/color/200/google-sheets.png
name: Expo Notes
org_id: null
owner_id: 83e1fa8e-a5db-487f-9780-c69846b9f8ca

(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{1237:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2831),s=a(7719);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4462:(e,t,a)=>{"use strict";a.d(t,{Indicator:()=>w,Root:()=>j});var r=a(8670),s=a(4887),n=a(6027),l=a(8421),o="Progress",[i,d]=(0,s.A)(o),[c,u]=i(o),f=r.forwardRef((e,t)=>{var a,r,s,o;let{__scopeProgress:i,value:d=null,max:u,getValueLabel:f=h,...x}=e;(u||0===u)&&!g(u)&&console.error((a="".concat(u),r="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let v=g(u)?u:100;null===d||b(d,v)||console.error((s="".concat(d),o="Progress","Invalid prop `value` of value `".concat(s,"` supplied to `").concat(o,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let j=b(d,v)?d:null,w=p(j)?f(j,v):void 0;return(0,l.jsx)(c,{scope:i,value:j,max:v,children:(0,l.jsx)(n.sG.div,{"aria-valuemax":v,"aria-valuemin":0,"aria-valuenow":p(j)?j:void 0,"aria-valuetext":w,role:"progressbar","data-state":m(j,v),"data-value":null!=j?j:void 0,"data-max":v,...x,ref:t})})});f.displayName=o;var x="ProgressIndicator",v=r.forwardRef((e,t)=>{var a;let{__scopeProgress:r,...s}=e,o=u(x,r);return(0,l.jsx)(n.sG.div,{"data-state":m(o.value,o.max),"data-value":null!==(a=o.value)&&void 0!==a?a:void 0,"data-max":o.max,...s,ref:t})});function h(e,t){return"".concat(Math.round(e/t*100),"%")}function m(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function p(e){return"number"==typeof e}function g(e){return p(e)&&!isNaN(e)&&e>0}function b(e,t){return p(e)&&!isNaN(e)&&e<=t&&e>=0}v.displayName=x;var j=f,w=v},4760:(e,t,a)=>{"use strict";a.d(t,{H:()=>r,K:()=>s});let r=async()=>{let e=await fetch("/api/version");if(!e.ok)throw Error("Failed to fetch version");return e.json()},s=async(e,t)=>{let a=await fetch("/api/datasets/".concat(e,"/shardsets/").concat(t,"/sync"));if(404===a.status)return null;if(!a.ok)throw Error("Failed to fetch shardset sync status: ".concat(a.status));return a.json()}},5314:(e,t,a)=>{"use strict";a.d(t,{SyncShardsetButton:()=>v});var r=a(8421),s=a(8670),n=a(6853);let l=(0,a(7750).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var o=a(5163);let i=(0,o.createServerReference)("70f55a50cf88818593d1975bdd39fb64c5a9a15992",o.callServer,void 0,o.findSourceMapURL,"syncShardset");var d=a(4462),c=a(1237);function u(e){let{className:t,value:a,...s}=e;return(0,r.jsx)(d.Root,{"data-slot":"progress",className:(0,c.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...s,children:(0,r.jsx)(d.Indicator,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}var f=a(3737),x=a(4760);function v(e){let{dataset_id:t,shardset_id:a}=e,[o,d]=(0,s.useState)(null),[c,v]=(0,s.useState)(null),h=(0,f.useRouter)(),m=async()=>{try{let e=await (0,x.K)(t,a);d(e)}catch(e){console.error("error",e),d(null)}};(0,s.useEffect)(()=>(m(),()=>{null!=c&&(clearInterval(c),v(null))}),[]),(0,s.useEffect)(()=>{null==c&&null!=o&&"done"!=o.status?v(setInterval(()=>m(),100)):null!=c&&(null==o||"done"==o.status)&&(clearInterval(c),v(null),h.refresh())},[o,c]);let p=async()=>{await i(t,a,!0),await m(),v(setInterval(()=>m(),100))};return(0,r.jsxs)("div",{className:"w-full flex flex-col gap-1",children:[(0,r.jsx)("form",{action:p,children:(0,r.jsxs)(n.$,{type:"submit",className:"w-full",disabled:!!o,children:[(0,r.jsx)(l,{className:"w-4 h-4"}),"Sync"]})}),(0,r.jsx)("div",{className:"h-[20px]",children:o&&(0,r.jsxs)("div",{className:"grid grid-cols-[80px_1fr] gap-2 items-center",children:[(0,r.jsx)(u,{className:"w-full",value:o.shard_count>0?100*o.done_count/o.shard_count:0}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[o.shard_count>0?"".concat(o.done_count," / ").concat(o.shard_count," "):"",o.status]})]})})]})}},6853:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,r:()=>o});var r=a(8421);a(8670);var s=a(4488),n=a(375),l=a(1237);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:a,size:n,asChild:i=!1,...d}=e,c=i?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,l.cn)(o({variant:a,size:n,className:t})),...d})}},6879:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>c});var r=a(8421);a(8670);var s=a(1237);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("flex flex-col gap-1.5 px-6",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6",t),...a})}},7021:(e,t,a)=>{"use strict";a.d(t,{ErrorCard:()=>i});var r=a(8421),s=a(6879),n=a(8136),l=a(3737),o=a(6853);function i(e){let{error:t,returnBtn:a}=e,i=(0,l.useRouter)();return(0,r.jsx)("div",{className:"my-8 w-full flex flex-row justify-center",children:(0,r.jsxs)(s.Zp,{className:"w-[480px]",children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 text-red-700"}),(0,r.jsx)("div",{children:"Error"})]})}),(0,r.jsx)(s.BT,{children:"Please contact support if the problem persists."})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)("p",{children:"string"==typeof t?t:JSON.stringify(t)})}),a&&(0,r.jsx)(s.wL,{children:(0,r.jsx)("div",{className:"w-full flex flex-row gap-2 justify-end",children:(0,r.jsx)(o.$,{variant:"outline",onClick:()=>i.back(),children:"Return"})})})]})})}},7884:(e,t,a)=>{"use strict";a.d(t,{DeleteShardsetDialog:()=>c});var r=a(8421),s=a(4260),n=a(6853),l=a(8498),o=a(5163);let i=(0,o.createServerReference)("609fdd24b0d24cd6c80deda573eaa96e6bd664be09",o.callServer,void 0,o.findSourceMapURL,"deleteShardset");var d=a(3737);function c(e){let{datasetId:t,shardsetId:a}=e,o=(0,d.useRouter)(),c=async()=>{let e=await i(t,a);e.success?(s.oR.success("Shardset deleted successfully"),o.push("/datasets/".concat(t))):s.oR.error("Failed to delete shardset: ".concat(e.error))};return(0,r.jsxs)(l.Lt,{children:[(0,r.jsx)(l.tv,{asChild:!0,children:(0,r.jsx)(n.$,{variant:"destructive",children:"Delete this shardset"})}),(0,r.jsxs)(l.EO,{children:[(0,r.jsxs)(l.wd,{children:[(0,r.jsx)(l.r7,{children:"Are you absolutely sure?"}),(0,r.jsx)(l.$v,{children:"This action cannot be undone. This will permanently delete your shardset and related shards. Of course, actual data will not be affected."})]}),(0,r.jsxs)(l.ck,{children:[(0,r.jsx)(l.Zr,{children:"Cancel"}),(0,r.jsx)(l.Rx,{onClick:c,children:"Continue"})]})]})]})}},8498:(e,t,a)=>{"use strict";a.d(t,{$v:()=>h,EO:()=>u,Lt:()=>o,Rx:()=>m,Zr:()=>p,ck:()=>x,r7:()=>v,tv:()=>i,wd:()=>f});var r=a(8421);a(8670);var s=a(3186),n=a(1237),l=a(6853);function o(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"alert-dialog",...t})}function i(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"alert-dialog-trigger",...t})}function d(e){let{...t}=e;return(0,r.jsx)(s.ZL,{"data-slot":"alert-dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,r.jsx)(s.hJ,{"data-slot":"alert-dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,...a}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(s.UC,{"data-slot":"alert-dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function f(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function x(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function v(e){let{className:t,...a}=e;return(0,r.jsx)(s.hE,{"data-slot":"alert-dialog-title",className:(0,n.cn)("text-lg font-semibold",t),...a})}function h(e){let{className:t,...a}=e;return(0,r.jsx)(s.VY,{"data-slot":"alert-dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function m(e){let{className:t,...a}=e;return(0,r.jsx)(s.rc,{className:(0,n.cn)((0,l.r)(),t),...a})}function p(e){let{className:t,...a}=e;return(0,r.jsx)(s.ZD,{className:(0,n.cn)((0,l.r)({variant:"outline"}),t),...a})}},9405:(e,t,a)=>{Promise.resolve().then(a.bind(a,5651)),Promise.resolve().then(a.t.bind(a,3396,23)),Promise.resolve().then(a.bind(a,7884)),Promise.resolve().then(a.bind(a,5314)),Promise.resolve().then(a.bind(a,7021))}},e=>{var t=t=>e(e.s=t);e.O(0,[542,260,501,303,463,20,866,358],()=>t(9405)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{1237:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(2831),a=r(5575);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},3737:(e,t,r)=>{"use strict";var n=r(85);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},4462:(e,t,r)=>{"use strict";r.d(t,{Indicator:()=>j,Root:()=>y});var n=r(8670),a=r(4887),s=r(6027),o=r(8421),i="Progress",[l,c]=(0,a.A)(i),[u,d]=l(i),f=n.forwardRef((e,t)=>{var r,n,a,i;let{__scopeProgress:l,value:c=null,max:d,getValueLabel:f=h,...v}=e;(d||0===d)&&!g(d)&&console.error((r="".concat(d),n="Progress","Invalid prop `max` of value `".concat(r,"` supplied to `").concat(n,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let x=g(d)?d:100;null===c||b(c,x)||console.error((a="".concat(c),i="Progress","Invalid prop `value` of value `".concat(a,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let y=b(c,x)?c:null,j=m(y)?f(y,x):void 0;return(0,o.jsx)(u,{scope:l,value:y,max:x,children:(0,o.jsx)(s.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":m(y)?y:void 0,"aria-valuetext":j,role:"progressbar","data-state":p(y,x),"data-value":null!=y?y:void 0,"data-max":x,...v,ref:t})})});f.displayName=i;var v="ProgressIndicator",x=n.forwardRef((e,t)=>{var r;let{__scopeProgress:n,...a}=e,i=d(v,n);return(0,o.jsx)(s.sG.div,{"data-state":p(i.value,i.max),"data-value":null!==(r=i.value)&&void 0!==r?r:void 0,"data-max":i.max,...a,ref:t})});function h(e,t){return"".concat(Math.round(e/t*100),"%")}function p(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function m(e){return"number"==typeof e}function g(e){return m(e)&&!isNaN(e)&&e>0}function b(e,t){return m(e)&&!isNaN(e)&&e<=t&&e>=0}x.displayName=v;var y=f,j=x},4760:(e,t,r)=>{"use strict";r.d(t,{H:()=>n,K:()=>a});let n=async()=>{let e=await fetch("/api/version");if(!e.ok)throw Error("Failed to fetch version");return e.json()},a=async(e,t)=>{let r=await fetch("/api/datasets/".concat(e,"/shardsets/").concat(t,"/sync"));if(404===r.status)return null;if(!r.ok)throw Error("Failed to fetch shardset sync status: ".concat(r.status));return r.json()}},4887:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,q:()=>s});var n=r(8670),a=r(8421);function s(e,t){let r=n.createContext(t),s=e=>{let{children:t,...s}=e,o=n.useMemo(()=>s,Object.values(s));return(0,a.jsx)(r.Provider,{value:o,children:t})};return s.displayName=e+"Provider",[s,function(a){let s=n.useContext(r);if(s)return s;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function o(e,t=[]){let r=[],s=()=>{let t=r.map(e=>n.createContext(e));return function(r){let a=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return s.scopeName=e,[function(t,s){let o=n.createContext(s),i=r.length;r=[...r,s];let l=t=>{let{scope:r,children:s,...l}=t,c=r?.[e]?.[i]||o,u=n.useMemo(()=>l,Object.values(l));return(0,a.jsx)(c.Provider,{value:u,children:s})};return l.displayName=t+"Provider",[l,function(r,a){let l=a?.[e]?.[i]||o,c=n.useContext(l);if(c)return c;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(s,...t)]}},5163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return s},findSourceMapURL:function(){return a.findSourceMapURL}});let n=r(168),a=r(4092),s=r(2785).createServerReference},6027:(e,t,r)=>{"use strict";r.d(t,{hO:()=>l,sG:()=>i});var n=r(8670),a=r(6596),s=r(4488),o=r(8421),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=n.forwardRef((e,r)=>{let{asChild:n,...a}=e,i=n?s.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(i,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function l(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},6853:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var n=r(8421);r(8670);var a=r(4488),s=r(375),o=r(1237);let i=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:s,asChild:l=!1,...c}=e,u=l?a.DX:"button";return(0,n.jsx)(u,{"data-slot":"button",className:(0,o.cn)(i({variant:r,size:s,className:t})),...c})}},6879:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>i,Zp:()=>s,aR:()=>o,wL:()=>u});var n=r(8421);r(8670);var a=r(1237);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("flex flex-col gap-1.5 px-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}function u(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6",t),...r})}},7021:(e,t,r)=>{"use strict";r.d(t,{ErrorCard:()=>l});var n=r(8421),a=r(6879),s=r(8136),o=r(3737),i=r(6853);function l(e){let{error:t,returnBtn:r}=e,l=(0,o.useRouter)();return(0,n.jsx)("div",{className:"my-8 w-full flex flex-row justify-center",children:(0,n.jsxs)(a.Zp,{className:"w-[480px]",children:[(0,n.jsxs)(a.aR,{children:[(0,n.jsx)(a.ZB,{children:(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,n.jsx)(s.A,{className:"w-4 h-4 text-red-700"}),(0,n.jsx)("div",{children:"Error"})]})}),(0,n.jsx)(a.BT,{children:"Please contact support if the problem persists."})]}),(0,n.jsx)(a.Wu,{children:(0,n.jsx)("p",{children:"string"==typeof t?t:JSON.stringify(t)})}),r&&(0,n.jsx)(a.wL,{children:(0,n.jsx)("div",{className:"w-full flex flex-row gap-2 justify-end",children:(0,n.jsx)(i.$,{variant:"outline",onClick:()=>l.back(),children:"Return"})})})]})})}},7237:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3396,23)),Promise.resolve().then(r.bind(r,9211)),Promise.resolve().then(r.bind(r,7021))},8136:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(7750).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9211:(e,t,r)=>{"use strict";r.d(t,{SyncShardsetButton:()=>x});var n=r(8421),a=r(8670),s=r(6853);let o=(0,r(7750).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var i=r(5163);let l=(0,i.createServerReference)("70b3f872d71c98ede88bf23a0dbd8c883fc07336e0",i.callServer,void 0,i.findSourceMapURL,"syncShardset");var c=r(4462),u=r(1237);function d(e){let{className:t,value:r,...a}=e;return(0,n.jsx)(c.Root,{"data-slot":"progress",className:(0,u.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...a,children:(0,n.jsx)(c.Indicator,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})}var f=r(3737),v=r(4760);function x(e){let{dataset_id:t,shardset_id:r}=e,[i,c]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),h=(0,f.useRouter)(),p=async()=>{try{let e=await (0,v.K)(t,r);c(e)}catch(e){console.error("error",e),c(null)}};(0,a.useEffect)(()=>(p(),()=>{null!=u&&(clearInterval(u),x(null))}),[]),(0,a.useEffect)(()=>{null!=i&&null==u?x(setInterval(()=>p(),100)):null==i&&null!=u&&(clearInterval(u),x(null),h.refresh())},[i,u]);let m=async()=>{await l(t,r,!0),await p(),x(setInterval(()=>p(),100))};return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"h-4",children:i&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d,{className:"w-80",value:i.shard_count>0?100*i.done_count/i.shard_count:0}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:i.status}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:i.shard_count>0?"".concat(i.done_count," / ").concat(i.shard_count):""})]})}),(0,n.jsx)("form",{action:m,children:(0,n.jsxs)(s.$,{type:"submit",disabled:!!i,children:[(0,n.jsx)(o,{className:"w-4 h-4"}),"Sync"]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[518,501,20,866,358],()=>t(7237)),_N_E=e.O()}]);
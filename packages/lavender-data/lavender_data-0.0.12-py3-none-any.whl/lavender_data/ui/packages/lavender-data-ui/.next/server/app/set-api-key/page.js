(()=>{var e={};e.id=982,e.ids=[982],e.modules={2638:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var a=t(59777),s=t(98580),n=t(23013),i=t(20459),o=t(32171),d=t(56787),c=t(96114),l=t(40605);let u=(0,l.createServerReference)("7f291da801038afb8507e85f59f2642ac4a87387c9",l.callServer,void 0,l.findSourceMapURL,"setApiKey");function p(){let[e,r]=(0,s.useState)(!1),t=(0,s.useCallback)(async e=>{r(!0);let t=await u(e);t.error&&c.oR.error(t.error),t.redirect&&(0,d.redirect)(t.redirect),r(!1)},[]);return(0,a.jsx)("main",{className:"container flex w-full flex-1 flex-col items-center justify-center space-y-8 py-10",children:(0,a.jsxs)(n.Zp,{className:"w-[480px]",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Set API Key"}),(0,a.jsxs)(n.BT,{children:["Set the API key to use the Lavender Data Web UI. ",(0,a.jsx)("br",{})," If you don't have an API key, please contact the administrator."]})]}),(0,a.jsx)("form",{action:t,children:(0,a.jsxs)(n.Wu,{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.p,{name:"apiKey",type:"password",placeholder:"API Key"}),(0,a.jsx)(o.$,{type:"submit",children:"Confirm"})]})})]})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23013:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>l});var a=t(59777);t(98580);var s=t(53028);function n({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("flex flex-col gap-1.5 px-6",e),...r})}function o({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function d({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...r})}function c({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}function l({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6",e),...r})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37897:(e,r,t)=>{Promise.resolve().then(t.bind(t,2638))},43932:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(18445).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/set-api-key/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/set-api-key/page.tsx","default")},47625:(e,r,t)=>{Promise.resolve().then(t.bind(t,43932))},56787:(e,r,t)=>{"use strict";var a=t(33167);t.o(a,"redirect")&&t.d(r,{redirect:function(){return a.redirect}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},93359:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c});var a=t(14125),s=t(29466),n=t(63940),i=t.n(n),o=t(339),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let c={children:["",{children:["set-api-key",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,43932)),"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/set-api-key/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74723)),"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7376,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,97801,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,31318,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/set-api-key/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/set-api-key/page",pathname:"/set-api-key",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},95705:(e,r,t)=>{"use strict";t.d(r,{K:()=>i,m:()=>o});var a=t(39717),s=t(51542),n=t(72795);let i=async()=>{let e=process.env.API_URL||"http://localhost:8000",r=await (0,s.UL)(),t=r.get("lavender-data-api-key")?.value;return(0,a.Ay)({baseUrl:e,headers:t?{Authorization:`Basic ${t}`}:{},fetch:async e=>{let r=await fetch(e,{cache:"no-store"});return(401===r.status||403===r.status)&&(0,n.redirect)("/set-api-key"),r}})},o=async e=>{let r=process.env.API_URL||"http://localhost:8000";return(0,a.Ay)({baseUrl:r,headers:{Authorization:`Basic ${e}`},fetch:async e=>fetch(e,{cache:"no-store"})})}},99008:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"7f291da801038afb8507e85f59f2642ac4a87387c9":()=>d});var a=t(61025);t(37133);let s=require("buffer");var n=t(95705),i=t(51542),o=t(51221);let d=async e=>{let r=e.get("apiKey");if(!r)return{error:"API Key is required",redirect:null};let t=s.Buffer.from(r,"binary").toString("base64"),a=await (await (0,n.m)(t)).GET("/datasets/");return a.error&&401===a.response.status?{error:String(a.error.detail),redirect:null}:((await (0,i.UL)()).set("lavender-data-api-key",t),{error:null,redirect:"/"})};(0,o.D)([d]),(0,a.A)(d,"7f291da801038afb8507e85f59f2642ac4a87387c9",null)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[232,750,111,719],()=>t(93359));module.exports=a})();